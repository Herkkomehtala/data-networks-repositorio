{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Tietoverkkokurssin dokumentaatio Hei, olen Herkko Meht\u00e4l\u00e4 ja t\u00e4m\u00e4 sivusto sis\u00e4lt\u00e4\u00e4 dokumentaation tietoverkkokurssille. Kurssin aikana rakensin Virtualboxin avulla l\u00e4hiverkon ja laajensin sit\u00e4 uusilla laitteilla ja erilaisilla protokollilla. Dokumentaatio alkaa yksinkertaisesta kahden kytkimien rakenteesta paljon monimutkaisempaan l\u00e4hiverkkoon. Repositorio ja teht\u00e4v\u00e4nannot T\u00e4m\u00e4n nettisivun repositorion l\u00f6yd\u00e4t t\u00e4\u00e4lt\u00e4 Harjoitusten teht\u00e4v\u00e4annot l\u00f6yd\u00e4t t\u00e4\u00e4lt\u00e4","title":"Tietoverkkokurssin dokumentaatio"},{"location":"#tietoverkkokurssin-dokumentaatio","text":"Hei, olen Herkko Meht\u00e4l\u00e4 ja t\u00e4m\u00e4 sivusto sis\u00e4lt\u00e4\u00e4 dokumentaation tietoverkkokurssille. Kurssin aikana rakensin Virtualboxin avulla l\u00e4hiverkon ja laajensin sit\u00e4 uusilla laitteilla ja erilaisilla protokollilla. Dokumentaatio alkaa yksinkertaisesta kahden kytkimien rakenteesta paljon monimutkaisempaan l\u00e4hiverkkoon.","title":"Tietoverkkokurssin dokumentaatio"},{"location":"#repositorio-ja-tehtavanannot","text":"T\u00e4m\u00e4n nettisivun repositorion l\u00f6yd\u00e4t t\u00e4\u00e4lt\u00e4 Harjoitusten teht\u00e4v\u00e4annot l\u00f6yd\u00e4t t\u00e4\u00e4lt\u00e4","title":"Repositorio ja teht\u00e4v\u00e4nannot"},{"location":"E01/","text":"Ensimm\u00e4iset virtuaalikoneet Minun nimeni on Herkko Meht\u00e4l\u00e4 ja opiskelijanumeroni on AA2958 Mit\u00e4 hy\u00f6ty\u00e4 virtuaalikoneista on? Virtuaalikoneet mahdollistavat monen k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4n ajamisen virtualisointitekniikan avulla. Ajaa riskialttiita ohjelmia huolimatta siit\u00e4, ett\u00e4 se voisi korruptoida tai vahingoittaa is\u00e4nt\u00e4konetta. Mit\u00e4 voit tehd\u00e4 sill\u00e4? Voit ajaa monta k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4\u00e4 samasta koneesta jotka ovat erist\u00e4ytyneet toisistaan. T\u00e4m\u00e4 mahdollistaa esim: hiekkalaatikkoymp\u00e4rist\u00f6n jossa on mahdollista testata ohjelmia, konfigurointia ja muuta ilman, ett\u00e4 t\u00e4m\u00e4 haittaisi is\u00e4nt\u00e4konetta. Onko tietokoneissa mit\u00e4\u00e4n pointtia ilman verkkoyhteytt\u00e4? Kyll\u00e4. T\u00e4ll\u00e4 voidaan esim.: Turvata j\u00e4rjestelm\u00e4 internetist\u00e4 tulevilta uhilta tai k\u00e4sitell\u00e4 tiedostoja tai tietokantoja jotka eiv\u00e4t miss\u00e4\u00e4n nimess\u00e4 voi vuotaa ulkopuolelle. Virtuaalikoneen dokumentointi [1]. Vaihdetaan virtuaalikoneen verkkoasetukset NAT (Network address translation) moodiin jotta saadaan toimiva internet yhteys. [2]. Testataan virtuaalikoneen internet yhteys k\u00e4ytt\u00e4m\u00e4ll\u00e4 ping komentoa. K\u00e4ytt\u00e4m\u00e4ll\u00e4 parametri\u00e4 -c 4 l\u00e4het\u00e4mme vain 4 ECHO_REQUEST pakettia. ( man ping kertoo kaikki parametrit) lubuntu@lubuntu-virtualbox:~$ ping -c 4 jamk.fi PING jamk.fi (195.148.129.49) 56(84) bytes of data. 64 bytes from host49.guest.jamk.fi (195.148.129.49): icmp_seq=1 ttl=244 time=18.9 ms 64 bytes from host49.guest.jamk.fi (195.148.129.49): icmp_seq=2 ttl=244 time=12.0 ms 64 bytes from host49.guest.jamk.fi (195.148.129.49): icmp_seq=3 ttl=244 time=12.2 ms 64 bytes from host49.guest.jamk.fi (195.148.129.49): icmp_seq=4 ttl=244 time=12.0 ms --- jamk.fi ping statistics --- 4 packets transmitted, 4 received, 0% packet loss, time 3005ms rtt min/avg/max/mdev = 11.960/13.756/18.892/2.965 ms [3]. Testataan 'traceroute' komentoa. Tulokset olivat hajanaiset, joten vaihdoin verkkoasetukset 'bridged' moodiin. lubuntu@lubuntu-virtualbox:~$ traceroute jamk.fi traceroute to jamk.fi (195.148.129.49), 64 hops max 1 192.168.1.1 3,003ms 1,433ms 1,281ms 2 84.250.64.2 3,090ms 1,871ms 2,435ms 3 * 141.208.195.165 177,099ms 102,986ms 4 193.110.226.14 6,925ms 6,734ms 6,712ms 5 86.50.255.233 12,977ms 11,587ms 12,254ms 6 86.50.255.222 11,490ms 11,020ms 16,985ms 7 86.50.255.225 11,550ms 20,414ms 14,251ms 8 86.50.255.221 13,216ms 12,068ms 11,474ms 9 86.50.255.161 29,707ms 20,728ms 11,113ms 10 193.166.5.142 12,108ms 11,354ms 15,807ms 11 195.148.129.49 10,970ms 10,631ms 10,808ms Suoritin komennon monta kertaa ja jonkin takia jokainen nro. 3 hop j\u00e4i viivyttelem\u00e4\u00e4n tai ei p\u00e4\u00e4ssyt perille ollenkaan. En ole varma miksi n\u00e4in on. Lis\u00e4 testaus voisi auttaa paljastamaan t\u00e4m\u00e4n vian. Kokeillaan tracerouten --resolve-hostnames parametria: lubuntu@lubuntu-virtualbox:~$ traceroute --resolve-hostnames jamk.fi traceroute to jamk.fi (195.148.129.49), 64 hops max 1 192.168.1.1 (home) 1,168ms 1,209ms 0,841ms 2 84.250.64.2 (dsl-jklbng11-54fa40-2.dhcp.inet.fi) 1,729ms 1,953ms 1,301ms 3 * * * 4 193.110.226.14 (csc.ficix1.ficix.fi) 7,139ms 6,923ms 6,835ms 5 86.50.255.233 (espoo2-et-0-1-7-1.ip.funet.fi) 11,546ms 11,578ms 11,471ms 6 86.50.255.222 (hameenlinna1-et-0-0-0-1.ip.funet.fi) 11,412ms 11,746ms 11,773ms 7 86.50.255.225 (hameenlinna2-et-0-0-1-1.ip.funet.fi) 11,652ms 11,893ms 11,488ms 8 86.50.255.221 (tampere1-et-0-1-0-1.ip.funet.fi) 12,504ms 14,214ms 12,910ms 9 86.50.255.161 (jyvaskyla1-et-0-1-0-1.ip.funet.fi) 12,428ms 16,620ms 12,405ms 10 193.166.5.142 (193.166.5.142) 11,684ms 16,449ms 11,709ms 11 195.148.129.49 (host49.guest.jamk.fi) 11,905ms 11,056ms 10,894ms Kuten huomataan, nro. 3 hop ei saatu yhteytt\u00e4. Koitin viel\u00e4 k\u00e4ytt\u00e4\u00e4 ping komentoa IP osoitteeseen 141.208.195.165 mutta en saanut mit\u00e4\u00e4n takaisin. Host alhaalla? [4] Testataan viel\u00e4 MyTraceRoute mtr komentoa. T\u00e4m\u00e4 on kuin ping ja tracerouten yhdistelm\u00e4. Ohjelmassa on monta display moodia jotka auttavat hahmottamaan dataa. Windowsin oma mtr:\u00e4n vastainen ohjelma on pathping .","title":"Ensimm\u00e4iset virtuaalikoneet"},{"location":"E01/#ensimmaiset-virtuaalikoneet","text":"Minun nimeni on Herkko Meht\u00e4l\u00e4 ja opiskelijanumeroni on AA2958 Mit\u00e4 hy\u00f6ty\u00e4 virtuaalikoneista on? Virtuaalikoneet mahdollistavat monen k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4n ajamisen virtualisointitekniikan avulla. Ajaa riskialttiita ohjelmia huolimatta siit\u00e4, ett\u00e4 se voisi korruptoida tai vahingoittaa is\u00e4nt\u00e4konetta. Mit\u00e4 voit tehd\u00e4 sill\u00e4? Voit ajaa monta k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4\u00e4 samasta koneesta jotka ovat erist\u00e4ytyneet toisistaan. T\u00e4m\u00e4 mahdollistaa esim: hiekkalaatikkoymp\u00e4rist\u00f6n jossa on mahdollista testata ohjelmia, konfigurointia ja muuta ilman, ett\u00e4 t\u00e4m\u00e4 haittaisi is\u00e4nt\u00e4konetta. Onko tietokoneissa mit\u00e4\u00e4n pointtia ilman verkkoyhteytt\u00e4? Kyll\u00e4. T\u00e4ll\u00e4 voidaan esim.: Turvata j\u00e4rjestelm\u00e4 internetist\u00e4 tulevilta uhilta tai k\u00e4sitell\u00e4 tiedostoja tai tietokantoja jotka eiv\u00e4t miss\u00e4\u00e4n nimess\u00e4 voi vuotaa ulkopuolelle.","title":"Ensimm\u00e4iset virtuaalikoneet"},{"location":"E01/#virtuaalikoneen-dokumentointi","text":"[1]. Vaihdetaan virtuaalikoneen verkkoasetukset NAT (Network address translation) moodiin jotta saadaan toimiva internet yhteys. [2]. Testataan virtuaalikoneen internet yhteys k\u00e4ytt\u00e4m\u00e4ll\u00e4 ping komentoa. K\u00e4ytt\u00e4m\u00e4ll\u00e4 parametri\u00e4 -c 4 l\u00e4het\u00e4mme vain 4 ECHO_REQUEST pakettia. ( man ping kertoo kaikki parametrit) lubuntu@lubuntu-virtualbox:~$ ping -c 4 jamk.fi PING jamk.fi (195.148.129.49) 56(84) bytes of data. 64 bytes from host49.guest.jamk.fi (195.148.129.49): icmp_seq=1 ttl=244 time=18.9 ms 64 bytes from host49.guest.jamk.fi (195.148.129.49): icmp_seq=2 ttl=244 time=12.0 ms 64 bytes from host49.guest.jamk.fi (195.148.129.49): icmp_seq=3 ttl=244 time=12.2 ms 64 bytes from host49.guest.jamk.fi (195.148.129.49): icmp_seq=4 ttl=244 time=12.0 ms --- jamk.fi ping statistics --- 4 packets transmitted, 4 received, 0% packet loss, time 3005ms rtt min/avg/max/mdev = 11.960/13.756/18.892/2.965 ms [3]. Testataan 'traceroute' komentoa. Tulokset olivat hajanaiset, joten vaihdoin verkkoasetukset 'bridged' moodiin. lubuntu@lubuntu-virtualbox:~$ traceroute jamk.fi traceroute to jamk.fi (195.148.129.49), 64 hops max 1 192.168.1.1 3,003ms 1,433ms 1,281ms 2 84.250.64.2 3,090ms 1,871ms 2,435ms 3 * 141.208.195.165 177,099ms 102,986ms 4 193.110.226.14 6,925ms 6,734ms 6,712ms 5 86.50.255.233 12,977ms 11,587ms 12,254ms 6 86.50.255.222 11,490ms 11,020ms 16,985ms 7 86.50.255.225 11,550ms 20,414ms 14,251ms 8 86.50.255.221 13,216ms 12,068ms 11,474ms 9 86.50.255.161 29,707ms 20,728ms 11,113ms 10 193.166.5.142 12,108ms 11,354ms 15,807ms 11 195.148.129.49 10,970ms 10,631ms 10,808ms Suoritin komennon monta kertaa ja jonkin takia jokainen nro. 3 hop j\u00e4i viivyttelem\u00e4\u00e4n tai ei p\u00e4\u00e4ssyt perille ollenkaan. En ole varma miksi n\u00e4in on. Lis\u00e4 testaus voisi auttaa paljastamaan t\u00e4m\u00e4n vian. Kokeillaan tracerouten --resolve-hostnames parametria: lubuntu@lubuntu-virtualbox:~$ traceroute --resolve-hostnames jamk.fi traceroute to jamk.fi (195.148.129.49), 64 hops max 1 192.168.1.1 (home) 1,168ms 1,209ms 0,841ms 2 84.250.64.2 (dsl-jklbng11-54fa40-2.dhcp.inet.fi) 1,729ms 1,953ms 1,301ms 3 * * * 4 193.110.226.14 (csc.ficix1.ficix.fi) 7,139ms 6,923ms 6,835ms 5 86.50.255.233 (espoo2-et-0-1-7-1.ip.funet.fi) 11,546ms 11,578ms 11,471ms 6 86.50.255.222 (hameenlinna1-et-0-0-0-1.ip.funet.fi) 11,412ms 11,746ms 11,773ms 7 86.50.255.225 (hameenlinna2-et-0-0-1-1.ip.funet.fi) 11,652ms 11,893ms 11,488ms 8 86.50.255.221 (tampere1-et-0-1-0-1.ip.funet.fi) 12,504ms 14,214ms 12,910ms 9 86.50.255.161 (jyvaskyla1-et-0-1-0-1.ip.funet.fi) 12,428ms 16,620ms 12,405ms 10 193.166.5.142 (193.166.5.142) 11,684ms 16,449ms 11,709ms 11 195.148.129.49 (host49.guest.jamk.fi) 11,905ms 11,056ms 10,894ms Kuten huomataan, nro. 3 hop ei saatu yhteytt\u00e4. Koitin viel\u00e4 k\u00e4ytt\u00e4\u00e4 ping komentoa IP osoitteeseen 141.208.195.165 mutta en saanut mit\u00e4\u00e4n takaisin. Host alhaalla? [4] Testataan viel\u00e4 MyTraceRoute mtr komentoa. T\u00e4m\u00e4 on kuin ping ja tracerouten yhdistelm\u00e4. Ohjelmassa on monta display moodia jotka auttavat hahmottamaan dataa. Windowsin oma mtr:\u00e4n vastainen ohjelma on pathping .","title":"Virtuaalikoneen dokumentointi"},{"location":"E02/","text":"Ensimm\u00e4iset kytkimet Ensiksi tuon kytkimen minun virtuaaliymp\u00e4rist\u00f6\u00f6n ja kloonaan sen. Varmistan, ett\u00e4 niiden verkko asetukset ovat kohdillaan. Samalla konfiguroin lubuntu1 verkkoasetukset adapter 1 -> LAN1 ja lubuntu2 adapter 1 -> LAN3 Lopulta minun verkkotopologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4: L\u00e4hde: Karo Saharinen Porttien tila K\u00e4ynnist\u00e4n kytkimen ja kirjaudun sis\u00e4\u00e4n. Kytkimen terminaalin sis\u00e4ll\u00e4 voin k\u00e4ytt\u00e4\u00e4 show configuration -komentoa joka n\u00e4ytt\u00e4\u00e4 laitteen konfiguroinnin. Voin my\u00f6s nimet\u00e4 laitteen uudelleen configure snmp sysName <name> -komennolla ja nime\u00e4n sen Switch1 . Toinen kytkin nimet\u00e4\u00e4n Switch2 . Seuraavaksi avaan kytkimist\u00e4 portit. T\u00e4m\u00e4 toimii komennolla enable ports ja m\u00e4\u00e4ritt\u00e4ll\u00e4 portit jotka avataan. Nyt avaan vain portit 1 ja 2. Voin tarkistaa porttien tilan komennolla show ports # info T\u00e4st\u00e4 n\u00e4en, ett\u00e4 portit 1 ja 2 ovat aktiivisia. T\u00e4m\u00e4 toistetaan kytkimelle Switch2 Lubuntujen verkkoasetukset Seuraavaksi muutan lubuntujen verkkoasetukset manuaalisesti. Navigoin Edit connections... osioon. Lis\u00e4\u00e4n manuaalisesti seuraavan IP-osoitteen ja aliverkkopeitteen: T\u00e4m\u00e4n j\u00e4lkeen voin tarkistaa lubuntun terminaalista, ett\u00e4 asetukset ovat asettuneet oikein komennolla ip addr IP-osoite n\u00e4ytt\u00e4\u00e4 olevan oikea. Suoritan saman operaation lubuntu2 , mutta sen IP-osoite tulee olemaan 192.168.0.2 Yhteyden testaus T\u00e4m\u00e4n j\u00e4lkeen testaan lubuntejen v\u00e4lisen yhteyden. T\u00e4m\u00e4n voi suorittaa helposti komennolla ping <kohde> . Teen t\u00e4m\u00e4n kummallakin lubuntulla. T\u00e4st\u00e4 n\u00e4en, ett\u00e4 verkkoasetukset ovat konfiguroitu onnistuneesti. Forwarding tables Kytkimien forwarding tablet on mahdollista tarkistaa komennolla show fdb : Vasemmalla n\u00e4en verkkolaitteiden MAC -osoitteet. N\u00e4m\u00e4 kaksi laitetta ovat minun lubuntu laitteet. VLAN:ien luonti Luon VLAN:in komennolla create vlan workstations kytkimen komentorivilt\u00e4. VLAN tarvitsee Ethernet 802.1Q tagin jonka voin asettaa komennolla configure vlan workstations tag 5 . VLAN on nyt luotu, mutta se ei ole k\u00e4yt\u00f6ss\u00e4 viel\u00e4. Seuraavaksi porttien v\u00e4liset yhteydet pit\u00e4\u00e4 merkata tagged tai untagged. Palvelimien/ty\u00f6pisteiden ja verkkolaitteiden v\u00e4liset yhteydet ovat untagged kun taas pelkkien verkkolaitteiden v\u00e4liset yhteydet ovat tagged. Eli kaikki portit jotka osoittavat lubuntuja kohti ovat untagged. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennolla configure vlan workstations add ports <portit> untagged . T\u00e4ss\u00e4 tapauksessa se on portti 1. Samalla merkkaan kytkmimien v\u00e4liset portin tagged komennolla configure vlan workstations add ports 2 tagged . Lubuntu ty\u00f6pisteet pystyv\u00e4t nyt kommunikoimaan toistensa kanssa uudestaan. Kaikki hyvin! Viel\u00e4 tarkistan kummankin kytkimen forwarding tablet jotta kaikki on hyvin. Laitteiden MAC osoitteen tarkistamisen j\u00e4lkeen n\u00e4en, ett\u00e4 ty\u00f6pisteet ovat workstation VLANissa. T\u00e4ss\u00e4 on hyv\u00e4 tallentaa kytkimien konfigurointi viel\u00e4 kun ne toimivat komennolla save . Ethernet Framen nuuskiminen wiresharkilla Luon Lubuntu Wireshark virtuaalikoneen ja vaihdan se verkkoasetukset seuraavasti: Huomaa, ett\u00e4 t\u00e4m\u00e4 kone menee LAN2, eli kahden kytkimen v\u00e4liin. Katsotaan, mit\u00e4 saan nuuskittua. N\u00e4ytt\u00e4\u00e4 silt\u00e4, ett\u00e4 sain nuuskittua minun kahden lubuntun v\u00e4list\u00e4 kommunikaatiota. Annan wiresharkin tallentaa t\u00e4m\u00e4n tiedostoon jotta voin analysoida t\u00e4t\u00e4 dataa. Wireshark kysymykset Tarkastelen tallennettua tiedostoa wiresharkilla. Otan yhden ICMP rivin ja tutkin sit\u00e4. Find the source MAC address L\u00e4hde MAC osoite on 08:00:27:8a:f7:41 What is the Ethertype Ethertype on IPv4 Find the source IP address L\u00e4hde IP-osoite on 192.168.0.1 What is the Payload of the whole capture row? ICMP kohdan hex dump: 0000 00 00 94 90 00 02 08 20 59 60 57 5f 00 00 00 00 0010 ea ba 09 00 00 00 00 00 10 11 12 13 14 15 16 17 0020 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 0030 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35 36 37 Kytkinten konfiguroinnin tallennus Ensin teen seuraavan kytkinten komentoriviin: conf vlan workstations ipaddress 192.168.0.253/24 ja conf vlan workstations ipaddress 192.168.0.252/24 T\u00e4m\u00e4n j\u00e4lkeen otan SSH:n k\u00e4ytt\u00f6\u00f6n kytkimiss\u00e4 jotta liitty\u00e4 kytkimeen minun lubuntu -ty\u00f6pisteelt\u00e4. Nyt menen lubuntu koneelleni ja otan yhteyden SSH:lla minun kytkimiin: Sitten lataan et\u00e4n\u00e4 kummankin kytkimen konfiguraatio tiedostot komennolla show configuration * Switch2.1 # show configuration # # Module devmgr configuration. # configure snmp sysName \"Switch2\" configure snmp sysContact \"https://www.extremenetworks.com/support/\" configure sys-recovery-level switch reset # # Module vlan configuration. # configure vlan default delete ports all configure vr VR-Default delete ports 1-2 configure vr VR-Default add ports 1-2 configure vlan default delete ports 2 create vlan \"workstations\" configure vlan workstations tag 5 configure vlan Default add ports 1 untagged configure vlan workstations add ports 1 tagged configure vlan workstations add ports 2 untagged configure vlan workstations ipaddress 192.168.0.252 255.255.255.0 # * Switch1.1 # show configuration # # Module devmgr configuration. # configure snmp sysName \"Switch1\" configure snmp sysContact \"https://www.extremenetworks.com/support/\" configure sys-recovery-level switch reset # # Module vlan configuration. # configure vlan default delete ports all configure vr VR-Default delete ports 1-2 configure vr VR-Default add ports 1-2 configure vlan default delete ports 1 create vlan \"workstations\" configure vlan workstations tag 5 configure vlan Default add ports 2 untagged configure vlan workstations add ports 2 tagged configure vlan workstations add ports 1 untagged configure vlan workstations ipaddress 192.168.0.253 255.255.255.0 #","title":"Ensimm\u00e4iset kytkimet"},{"location":"E02/#ensimmaiset-kytkimet","text":"Ensiksi tuon kytkimen minun virtuaaliymp\u00e4rist\u00f6\u00f6n ja kloonaan sen. Varmistan, ett\u00e4 niiden verkko asetukset ovat kohdillaan. Samalla konfiguroin lubuntu1 verkkoasetukset adapter 1 -> LAN1 ja lubuntu2 adapter 1 -> LAN3 Lopulta minun verkkotopologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4: L\u00e4hde: Karo Saharinen","title":"Ensimm\u00e4iset kytkimet"},{"location":"E02/#porttien-tila","text":"K\u00e4ynnist\u00e4n kytkimen ja kirjaudun sis\u00e4\u00e4n. Kytkimen terminaalin sis\u00e4ll\u00e4 voin k\u00e4ytt\u00e4\u00e4 show configuration -komentoa joka n\u00e4ytt\u00e4\u00e4 laitteen konfiguroinnin. Voin my\u00f6s nimet\u00e4 laitteen uudelleen configure snmp sysName <name> -komennolla ja nime\u00e4n sen Switch1 . Toinen kytkin nimet\u00e4\u00e4n Switch2 . Seuraavaksi avaan kytkimist\u00e4 portit. T\u00e4m\u00e4 toimii komennolla enable ports ja m\u00e4\u00e4ritt\u00e4ll\u00e4 portit jotka avataan. Nyt avaan vain portit 1 ja 2. Voin tarkistaa porttien tilan komennolla show ports # info T\u00e4st\u00e4 n\u00e4en, ett\u00e4 portit 1 ja 2 ovat aktiivisia. T\u00e4m\u00e4 toistetaan kytkimelle Switch2","title":"Porttien tila"},{"location":"E02/#lubuntujen-verkkoasetukset","text":"Seuraavaksi muutan lubuntujen verkkoasetukset manuaalisesti. Navigoin Edit connections... osioon. Lis\u00e4\u00e4n manuaalisesti seuraavan IP-osoitteen ja aliverkkopeitteen: T\u00e4m\u00e4n j\u00e4lkeen voin tarkistaa lubuntun terminaalista, ett\u00e4 asetukset ovat asettuneet oikein komennolla ip addr IP-osoite n\u00e4ytt\u00e4\u00e4 olevan oikea. Suoritan saman operaation lubuntu2 , mutta sen IP-osoite tulee olemaan 192.168.0.2","title":"Lubuntujen verkkoasetukset"},{"location":"E02/#yhteyden-testaus","text":"T\u00e4m\u00e4n j\u00e4lkeen testaan lubuntejen v\u00e4lisen yhteyden. T\u00e4m\u00e4n voi suorittaa helposti komennolla ping <kohde> . Teen t\u00e4m\u00e4n kummallakin lubuntulla. T\u00e4st\u00e4 n\u00e4en, ett\u00e4 verkkoasetukset ovat konfiguroitu onnistuneesti.","title":"Yhteyden testaus"},{"location":"E02/#forwarding-tables","text":"Kytkimien forwarding tablet on mahdollista tarkistaa komennolla show fdb : Vasemmalla n\u00e4en verkkolaitteiden MAC -osoitteet. N\u00e4m\u00e4 kaksi laitetta ovat minun lubuntu laitteet.","title":"Forwarding tables"},{"location":"E02/#vlanien-luonti","text":"Luon VLAN:in komennolla create vlan workstations kytkimen komentorivilt\u00e4. VLAN tarvitsee Ethernet 802.1Q tagin jonka voin asettaa komennolla configure vlan workstations tag 5 . VLAN on nyt luotu, mutta se ei ole k\u00e4yt\u00f6ss\u00e4 viel\u00e4. Seuraavaksi porttien v\u00e4liset yhteydet pit\u00e4\u00e4 merkata tagged tai untagged. Palvelimien/ty\u00f6pisteiden ja verkkolaitteiden v\u00e4liset yhteydet ovat untagged kun taas pelkkien verkkolaitteiden v\u00e4liset yhteydet ovat tagged. Eli kaikki portit jotka osoittavat lubuntuja kohti ovat untagged. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennolla configure vlan workstations add ports <portit> untagged . T\u00e4ss\u00e4 tapauksessa se on portti 1. Samalla merkkaan kytkmimien v\u00e4liset portin tagged komennolla configure vlan workstations add ports 2 tagged . Lubuntu ty\u00f6pisteet pystyv\u00e4t nyt kommunikoimaan toistensa kanssa uudestaan. Kaikki hyvin! Viel\u00e4 tarkistan kummankin kytkimen forwarding tablet jotta kaikki on hyvin. Laitteiden MAC osoitteen tarkistamisen j\u00e4lkeen n\u00e4en, ett\u00e4 ty\u00f6pisteet ovat workstation VLANissa. T\u00e4ss\u00e4 on hyv\u00e4 tallentaa kytkimien konfigurointi viel\u00e4 kun ne toimivat komennolla save .","title":"VLAN:ien luonti"},{"location":"E02/#ethernet-framen-nuuskiminen-wiresharkilla","text":"Luon Lubuntu Wireshark virtuaalikoneen ja vaihdan se verkkoasetukset seuraavasti: Huomaa, ett\u00e4 t\u00e4m\u00e4 kone menee LAN2, eli kahden kytkimen v\u00e4liin. Katsotaan, mit\u00e4 saan nuuskittua. N\u00e4ytt\u00e4\u00e4 silt\u00e4, ett\u00e4 sain nuuskittua minun kahden lubuntun v\u00e4list\u00e4 kommunikaatiota. Annan wiresharkin tallentaa t\u00e4m\u00e4n tiedostoon jotta voin analysoida t\u00e4t\u00e4 dataa.","title":"Ethernet Framen nuuskiminen wiresharkilla"},{"location":"E02/#wireshark-kysymykset","text":"Tarkastelen tallennettua tiedostoa wiresharkilla. Otan yhden ICMP rivin ja tutkin sit\u00e4. Find the source MAC address L\u00e4hde MAC osoite on 08:00:27:8a:f7:41 What is the Ethertype Ethertype on IPv4 Find the source IP address L\u00e4hde IP-osoite on 192.168.0.1 What is the Payload of the whole capture row? ICMP kohdan hex dump: 0000 00 00 94 90 00 02 08 20 59 60 57 5f 00 00 00 00 0010 ea ba 09 00 00 00 00 00 10 11 12 13 14 15 16 17 0020 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 0030 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35 36 37","title":"Wireshark kysymykset"},{"location":"E02/#kytkinten-konfiguroinnin-tallennus","text":"Ensin teen seuraavan kytkinten komentoriviin: conf vlan workstations ipaddress 192.168.0.253/24 ja conf vlan workstations ipaddress 192.168.0.252/24 T\u00e4m\u00e4n j\u00e4lkeen otan SSH:n k\u00e4ytt\u00f6\u00f6n kytkimiss\u00e4 jotta liitty\u00e4 kytkimeen minun lubuntu -ty\u00f6pisteelt\u00e4. Nyt menen lubuntu koneelleni ja otan yhteyden SSH:lla minun kytkimiin: Sitten lataan et\u00e4n\u00e4 kummankin kytkimen konfiguraatio tiedostot komennolla show configuration * Switch2.1 # show configuration # # Module devmgr configuration. # configure snmp sysName \"Switch2\" configure snmp sysContact \"https://www.extremenetworks.com/support/\" configure sys-recovery-level switch reset # # Module vlan configuration. # configure vlan default delete ports all configure vr VR-Default delete ports 1-2 configure vr VR-Default add ports 1-2 configure vlan default delete ports 2 create vlan \"workstations\" configure vlan workstations tag 5 configure vlan Default add ports 1 untagged configure vlan workstations add ports 1 tagged configure vlan workstations add ports 2 untagged configure vlan workstations ipaddress 192.168.0.252 255.255.255.0 # * Switch1.1 # show configuration # # Module devmgr configuration. # configure snmp sysName \"Switch1\" configure snmp sysContact \"https://www.extremenetworks.com/support/\" configure sys-recovery-level switch reset # # Module vlan configuration. # configure vlan default delete ports all configure vr VR-Default delete ports 1-2 configure vr VR-Default add ports 1-2 configure vlan default delete ports 1 create vlan \"workstations\" configure vlan workstations tag 5 configure vlan Default add ports 2 untagged configure vlan workstations add ports 2 tagged configure vlan workstations add ports 1 untagged configure vlan workstations ipaddress 192.168.0.253 255.255.255.0 #","title":"Kytkinten konfiguroinnin tallennus"},{"location":"E03/","text":"Aliverkkojen laskeminen Opiskelijanumeroni: 2003189 Muotoilu: vvxyzki 192.168.89.0/24 10.3.31.0/24 Exercise 01 What is the usable address range of 192.168.ki.0/24? What is the broadcast address? What is the network address? + Usable address range: 256 - 2 = 254 + Broadcast address: 192.168.89.255 + Network address: 192.168.89.0 Exercise 02 Divide the 192.168.89.0/24 into smaller subnets with (atleast) 50 hosts in each. Specification Original subnet info Divided subnet info Divided subnet info Divided subnet info Divided subnet info New subnet mask 255.255.255.0 255.255.255.192 255.255.255.192 255.255.255.192 255.255.255.192 Number of usable hosts in the subnet 256 - 2 = 254 64 - 2 = 62 64 - 2 = 62 64 - 2 = 62 64 - 2 = 62 Network address 192.168.89.0/24 192.168.89.0/26 192.168.89.64/26 192.168.89.128/26 192.168.89.192/26 First IP host address 192.168.89.1 192.168.89.1 192.168.89.65 192.168.89.129 192.168.89.193 Last IP host address 192.168.89.254 192.168.89.62 192.168.89.126 192.168.89.190 192.168.89.254 Broadcast address 192.168.89.255 192.168.89.63 192.168.89.127 192.168.89.191 192.168.89.255 Exercise 03 Divide the 10.3.31.0/24 into smaller subnets with (atleast) 13 hosts in each. Specification Original subnet info Divided subnet info Divided subnet info Divided subnet info Divided subnet info Divided subnet info New subnet mask 255.255.255.0 255.255.255.224 255.255.255.224 255.255.255.224 255.255.255.224 255.255.255.224 Number of usable hosts in subnet 256 - 2 = 254 32 - 2 = 30 32 - 2 = 30 32 - 2 = 30 32 - 2 = 30 32 - 2 = 30 network address 10.3.31.0 10.3.31.0 10.3.31.32 10.3.31.64 10.3.31.96 10.3.31.128 First IP host address 10.3.31.1 10.3.31.1 10.3.31.33 10.3.31.65 10.3.31.97 10.3.31.129 Last IP host address 10.3.31.254 10.3.31.30 10.3.31.62 10.3.31.94 10.3.31.126 10.3.31.158 Broadcast address 10.3.31.255 10.3.31.31 10.3.31.63 10.3.31.95 10.3.31.127 10.3.31.159 Exercise 04 Divide the last 13 host subnet into smaller subnets with (atleast) 2 hosts in each. Specification Original subnet info Divided subnet info Divided subnet info Divided subnet info Divided subnet info New subnet mask 255.255.255.224 255.255.255.252 255.255.255.252 255.255.255.252 255.255.255.252 Number of usable hosts in subnet 32 - 2 = 30 4 - 2 = 2 4 - 2 = 2 4 - 2 = 2 4 - 2 = 2 network address 10.3.31.128 10.3.31.128 10.3.31.132 10.3.31.136 10.3.31.140 First IP host address 10.3.31.129 10.3.31.129 10.3.31.133 10.3.31.137 10.3.31.141 Last IP host address 10.3.31.158 10.3.31.130 10.3.31.134 10.3.31.138 10.3.31.142 Broadcast address 10.3.31.159 10.3.31.131 10.3.31.135 10.3.31.139 10.3.31.143 Exercise 05 Is 10.3.31.0/24 a part of 10.3.16.0/16? Write your calculations on paper or do them on the computer. Add the calculations to the documentation (e.g. take a picture of the paper or screenshot). 10.3.16.0/16 range = 10.3.0.0 - 10.3.255.255 10.3.31.0/24 is in range of 10.3.16.0/16 Exercise 06 Is 10.3.31.0/24 a part of 10.0.0.0/8? Write your calculations on paper or do them on the computer. Add the calculations to the documentation (e.g. take a picture of the paper or screenshot). 10.0.0.0/8 range = 10.0.0.0 - 10.255.255.255 10.3.31.0/24 is in range of 10.0.0.0/8 Looking up addresses My IP address belongs to inetnum group of 84.250.0.0 - 84.251.255.255. inetnum specifies a range of IPv4 addresses that the inetnum object presents. the netname given for this range is \"SONERA-FINLAND-BBNET\" which suggests that it is being used by Telia Sonera The \"descr\" confirms this, as it says that it's being operated by \"TeliaSonera Finland Oyj\". Internet Registries Search for 195.3.31.0/24, 43.3.89.0/24, 15.89.3.0/24 and 100.31.89.0/24 Who are they registered to? Search through the RIRs: 195.3.31.0/24 Plugging this in RIPE, I get the following results: It seems that it's allocated and is being used by RIPE itself. However, looking at the bottom the \"descr\" tells that it's been used by LDCOM Networks. I assume things in the bottom section are old information since it's been last modified in 2005 and LDCOM networks went defunct in 2009... 43.3.89.0/24 This IP address belongs under APNIC. It says that this IP belongs to a group owned by Alibaba Cloud which is a chinese cloud computing company. However, looking more through the list we can see that the \"address\" is located in Singapore. This makes more sense when you know that Alibaba group's headquaters are located in Singapore. 15.89.3.0/24 This IP address belong under ARIN. The site tells us that the IP address belongs to range 15.0.0.0 - 15.103.255.255 which has been given to Hewlett-Packard. That's a weird thing to find out when you're doing this research on HP laptop... 100.31.89.0/24 This one aswell belongs under ARIN. The IP address belongs to a range of 100.24.0.0 - 100.31.255.255 and is being operated by AMAZON. Full name gives us Amazon data services 'NoVa'. Only thing I could find about Amazon NoVa was an article about Northern Virginia Community College (NOVA) being in collaboration with Amazon Web Services (AWS) Educate program. The time frame would match as this was announced in June 2018 and the IP was reserved in April 2018. https://aws.amazon.com/blogs/publicsector/major-in-the-cloud-nova-and-aws-announce-first-cloud-computing-degree/","title":"Aliverkkojen laskeminen"},{"location":"E03/#aliverkkojen-laskeminen","text":"Opiskelijanumeroni: 2003189 Muotoilu: vvxyzki 192.168.89.0/24 10.3.31.0/24","title":"Aliverkkojen laskeminen"},{"location":"E03/#exercise-01","text":"What is the usable address range of 192.168.ki.0/24? What is the broadcast address? What is the network address? + Usable address range: 256 - 2 = 254 + Broadcast address: 192.168.89.255 + Network address: 192.168.89.0","title":"Exercise 01"},{"location":"E03/#exercise-02","text":"Divide the 192.168.89.0/24 into smaller subnets with (atleast) 50 hosts in each. Specification Original subnet info Divided subnet info Divided subnet info Divided subnet info Divided subnet info New subnet mask 255.255.255.0 255.255.255.192 255.255.255.192 255.255.255.192 255.255.255.192 Number of usable hosts in the subnet 256 - 2 = 254 64 - 2 = 62 64 - 2 = 62 64 - 2 = 62 64 - 2 = 62 Network address 192.168.89.0/24 192.168.89.0/26 192.168.89.64/26 192.168.89.128/26 192.168.89.192/26 First IP host address 192.168.89.1 192.168.89.1 192.168.89.65 192.168.89.129 192.168.89.193 Last IP host address 192.168.89.254 192.168.89.62 192.168.89.126 192.168.89.190 192.168.89.254 Broadcast address 192.168.89.255 192.168.89.63 192.168.89.127 192.168.89.191 192.168.89.255","title":"Exercise 02"},{"location":"E03/#exercise-03","text":"Divide the 10.3.31.0/24 into smaller subnets with (atleast) 13 hosts in each. Specification Original subnet info Divided subnet info Divided subnet info Divided subnet info Divided subnet info Divided subnet info New subnet mask 255.255.255.0 255.255.255.224 255.255.255.224 255.255.255.224 255.255.255.224 255.255.255.224 Number of usable hosts in subnet 256 - 2 = 254 32 - 2 = 30 32 - 2 = 30 32 - 2 = 30 32 - 2 = 30 32 - 2 = 30 network address 10.3.31.0 10.3.31.0 10.3.31.32 10.3.31.64 10.3.31.96 10.3.31.128 First IP host address 10.3.31.1 10.3.31.1 10.3.31.33 10.3.31.65 10.3.31.97 10.3.31.129 Last IP host address 10.3.31.254 10.3.31.30 10.3.31.62 10.3.31.94 10.3.31.126 10.3.31.158 Broadcast address 10.3.31.255 10.3.31.31 10.3.31.63 10.3.31.95 10.3.31.127 10.3.31.159","title":"Exercise 03"},{"location":"E03/#exercise-04","text":"Divide the last 13 host subnet into smaller subnets with (atleast) 2 hosts in each. Specification Original subnet info Divided subnet info Divided subnet info Divided subnet info Divided subnet info New subnet mask 255.255.255.224 255.255.255.252 255.255.255.252 255.255.255.252 255.255.255.252 Number of usable hosts in subnet 32 - 2 = 30 4 - 2 = 2 4 - 2 = 2 4 - 2 = 2 4 - 2 = 2 network address 10.3.31.128 10.3.31.128 10.3.31.132 10.3.31.136 10.3.31.140 First IP host address 10.3.31.129 10.3.31.129 10.3.31.133 10.3.31.137 10.3.31.141 Last IP host address 10.3.31.158 10.3.31.130 10.3.31.134 10.3.31.138 10.3.31.142 Broadcast address 10.3.31.159 10.3.31.131 10.3.31.135 10.3.31.139 10.3.31.143","title":"Exercise 04"},{"location":"E03/#exercise-05","text":"Is 10.3.31.0/24 a part of 10.3.16.0/16? Write your calculations on paper or do them on the computer. Add the calculations to the documentation (e.g. take a picture of the paper or screenshot). 10.3.16.0/16 range = 10.3.0.0 - 10.3.255.255 10.3.31.0/24 is in range of 10.3.16.0/16","title":"Exercise 05"},{"location":"E03/#exercise-06","text":"Is 10.3.31.0/24 a part of 10.0.0.0/8? Write your calculations on paper or do them on the computer. Add the calculations to the documentation (e.g. take a picture of the paper or screenshot). 10.0.0.0/8 range = 10.0.0.0 - 10.255.255.255 10.3.31.0/24 is in range of 10.0.0.0/8","title":"Exercise 06"},{"location":"E03/#looking-up-addresses","text":"My IP address belongs to inetnum group of 84.250.0.0 - 84.251.255.255. inetnum specifies a range of IPv4 addresses that the inetnum object presents. the netname given for this range is \"SONERA-FINLAND-BBNET\" which suggests that it is being used by Telia Sonera The \"descr\" confirms this, as it says that it's being operated by \"TeliaSonera Finland Oyj\".","title":"Looking up addresses"},{"location":"E03/#internet-registries","text":"Search for 195.3.31.0/24, 43.3.89.0/24, 15.89.3.0/24 and 100.31.89.0/24 Who are they registered to? Search through the RIRs: 195.3.31.0/24 Plugging this in RIPE, I get the following results: It seems that it's allocated and is being used by RIPE itself. However, looking at the bottom the \"descr\" tells that it's been used by LDCOM Networks. I assume things in the bottom section are old information since it's been last modified in 2005 and LDCOM networks went defunct in 2009... 43.3.89.0/24 This IP address belongs under APNIC. It says that this IP belongs to a group owned by Alibaba Cloud which is a chinese cloud computing company. However, looking more through the list we can see that the \"address\" is located in Singapore. This makes more sense when you know that Alibaba group's headquaters are located in Singapore. 15.89.3.0/24 This IP address belong under ARIN. The site tells us that the IP address belongs to range 15.0.0.0 - 15.103.255.255 which has been given to Hewlett-Packard. That's a weird thing to find out when you're doing this research on HP laptop... 100.31.89.0/24 This one aswell belongs under ARIN. The IP address belongs to a range of 100.24.0.0 - 100.31.255.255 and is being operated by AMAZON. Full name gives us Amazon data services 'NoVa'. Only thing I could find about Amazon NoVa was an article about Northern Virginia Community College (NOVA) being in collaboration with Amazon Web Services (AWS) Educate program. The time frame would match as this was announced in June 2018 and the IP was reserved in April 2018. https://aws.amazon.com/blogs/publicsector/major-in-the-cloud-nova-and-aws-announce-first-cloud-computing-degree/","title":"Internet Registries"},{"location":"E04/","text":"IP-osoitteisuus Ensin pit\u00e4\u00e4 lis\u00e4t\u00e4 vyos -reititin verkkoon. Teen t\u00e4m\u00e4n kytkem\u00e4ll\u00e4 Switch2 ja vyos:in yhteen uuteen verkkoon virtuaaliboxissa. N\u00e4ihin kumpaankin lis\u00e4\u00e4n uuden internal network adapterin ja nime\u00e4n sen RtoSW. T\u00e4m\u00e4n j\u00e4lkeen verkon fyysinen topologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4: Portit tulevat n\u00e4ytt\u00e4m\u00e4\u00e4n t\u00e4lt\u00e4: vyos asetukset Haluan lis\u00e4t\u00e4 vyos eth0 rajapintaan descriptionin \"toRtoSW\" selveyden takia. Kirjaudun sis\u00e4\u00e4n ja menen configure -moodiin. Sen j\u00e4lkeen sy\u00f6t\u00e4n komentoriville set interfaces ethernet eth0 description toRtoSW . T\u00e4m\u00e4n j\u00e4lkeen alan muuttamaan itse eth0 rajapinnan konfiguraatiota. Konfiguroin teht\u00e4v\u00e4nannon mukaan ekat VLANit niin, ett\u00e4 minun Exercise 02 tekem\u00e4t aliverkot olisivat n\u00e4iss\u00e4. N\u00e4ihin VLANeihin tulee minun Lubuntut. Lajittelen vyos -gateway/router niin, ett\u00e4 se on kaikkien aliverkkojen viimeinen k\u00e4ytett\u00e4v\u00e4 IP-osoite. T\u00e4m\u00e4n j\u00e4lkeen k\u00e4yt\u00e4n show interfaces -komentoa n\u00e4hd\u00e4kseni minun rajapinnat. N\u00e4en, ett\u00e4 VLANit ovat konfiguroitu. Tallennan n\u00e4m\u00e4 k\u00e4ytt\u00e4m\u00e4ll\u00e4 commit ja save -komentoa. Palaan show -moodiin tarkastamaan asetuksiani. Lubuntujen asetukset Lubuntu -ty\u00f6asemien verkkoasetukset pit\u00e4\u00e4 vaihtaa uuden verkkolajitelman mukaisesti. Kuvassa n\u00e4kyy Lubuntujen uudet verkkoasetukset. Lubuntujen IP-osoitteet ovat heid\u00e4n aliverkkojen ensimm\u00e4iset k\u00e4ytett\u00e4v\u00e4t IP-osoitteet, kun taas heid\u00e4n gateway (vyos) on heid\u00e4n aliverkon viimeinen k\u00e4ytett\u00e4v\u00e4 IP-osoite. Kytkimien asetukset Seuraavaksi luon uuden VLANin jonka nimeksi tulee network_devices . Annan niille uuden Ethernet 802.1Q tagin joka on t\u00e4ss\u00e4 tapauksessa tag 10. T\u00e4m\u00e4n j\u00e4lkeen portit jotka osoittavat vyos reittimeen ja kytkimiin t\u00e4g\u00e4t\u00e4\u00e4n. Kun portit on t\u00e4g\u00e4tty, exercise 02 asennetut IP-osoitteet kytkimille pit\u00e4\u00e4 poistaa. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennolla unconfigure vlan <vlan> ipaddress . T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4mme kytkimille Exercise 03 tehdyn IP-osoitteen ja maskin komennolla configure vlan network_devices ipaddress <ip> <mask> : HUOM!!! Kuvassa n\u00e4kyv\u00e4t IP osoitteet eiv\u00e4t ole lopullisia IP-osoitteita joita k\u00e4ytin. Vaikka n\u00e4m\u00e4 toimivat, niin vaihdoin subnettausta hieman jotta minulla riitt\u00e4\u00e4 IP-osoitteita seuraaviin teht\u00e4viin. Todelliset IP-osoitteet n\u00e4et t\u00e4m\u00e4n osion lopussa. Sitten viel\u00e4 sy\u00f6t\u00e4n kytkimille gateway IP-osoitteen. Tarkoitus on, ett\u00e4 jokaisen aliverkon viimeinen k\u00e4ytett\u00e4v\u00e4 IP-osoite on gateway:n IP, joten t\u00e4ss\u00e4 tapauksessa se on 10.3.31.46. T\u00e4m\u00e4 lis\u00e4t\u00e4\u00e4n komennolla: configure iproute add default <ip of router> . Viimeiseksi lis\u00e4t\u00e4\u00e4n t\u00e4m\u00e4 aliverkko vyos -reitittimmelle komennolla set interfaces ethernet eth0 vif 10 address 10.3.31.46/28 . Lopulta minun (lopullinen) aliverkoitus n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4: The moment of truth Nyt testaan verkon toimivuutta pingaamalla ja tracerouttaamalla ty\u00f6asemia. Mit\u00e4k\u00f6h\u00e4n tapahtuu? Kaikki n\u00e4ytt\u00e4\u00e4 toimivan kuten pit\u00e4\u00e4! Konffaukset network_devices konfiguroinnit ovat t\u00e4ss\u00e4: VYOS: vyos@vyos:~$ show configuration interfaces { interfaces { ethernet eth0 { description toRtoSW duplex auto hw-id 08:00:27:63:a0:05 smp-affinity auto speed auto vif 5 { address 192.168.89.62/26 description workstations1 } vif 6 { address 192.168.89.126/26 description workstations2 } vif 10 { address 10.3.31.46/28 description netdev } } loopback lo { } } protocols { } service { ssh { port 22 } } system { config-management { commit-revisions 100 } console { device ttyS0 { speed 9600 } } host-name vyos login { user vyos { authentication { encrypted-password **************** plaintext-password **************** } level admin } } syslog { global { facility all { level info } facility protocols { level debug } } } time-zone UTC } Switch1: * Switch1.1 # show configuration # # Module devmgr configuration. # configure snmp sysName \"Switch1\" configure snmp sysContact \"https://www.extremenetworks.com/support/\" configure sys-recovery-level switch reset # # Module vlan configuration. # configure vlan default delete ports all configure vr VR-Default delete ports 1-2 configure vr VR-Default add ports 1-2 configure vlan default delete ports 1-2 create vlan \"network_devices\" configure vlan network_devices tag 10 create vlan \"workstations\" configure vlan workstations tag 5 create vlan \"workstations2\" configure vlan workstations2 tag 6 configure vlan network_devices add ports 2 tagged configure vlan workstations add ports 2 tagged configure vlan workstations add ports 1 untagged configure vlan workstations2 add ports 2 tagged configure vlan network_devices ipaddress 10.3.31.33 255.255.255.240 # # Module mcmgr configuration. # # # Module otm configuration. # # # Module fdb configuration. # disable iparp vr VR-Mgmt refresh disable neighbor-discovery vr VR-Mgmt refresh # # Module rtmgr configuration. # configure iproute add default 10.3.31.46 enable icmp useredirects # # Module policy configuration. # configure policy slices tci-overwrite 0 # # Module aaa configuration. # configure account admin encrypted \"$5$LVUMiH$OmC73PnstIHrVfPRZiAJdGyv.u4rlpdGFNscvg5P7A5\" # # Module acl configuration. # # # Module bfd configuration. # # # Module bgp configuration. # # # Module cfgmgr configuration. # # # Module dnsAnalytics configuration. # # # Module dosprotect configuration. # # # Module dot1ag configuration. # # # Module eaps configuration. # # # Module edp configuration. # # # Module elrp configuration. # # # Module ems configuration. # # # Module epm configuration. # # # Module erps configuration. # # # Module esrp configuration. # # # Module etmon configuration. # # # Module exsshd configuration. # enable ssh2 # # Module hal configuration. # configure ports 1 debounce time 0 configure ports 2 debounce time 0 # # Module idMgr configuration. # # # Module ipSecurity configuration. # # # Module isis configuration. # # # Module lldp configuration. # # # Module mrp configuration. # # # Module msdp configuration. # # # Module netLogin configuration. # # # Module netTools configuration. # # # Module nodealias configuration. # # # Module ntp configuration. # # # Module ospf configuration. # # # Module ospfv3 configuration. # # # Module pim configuration. # # # Module poe configuration. # # # Module rip configuration. # # # Module ripng configuration. # # # Module snmpMaster configuration. # configure snmpv3 engine-id 03:08:00:27:87:1f:97 # # Module stp configuration. # configure mstp region 080027871f97 disable stpd s0 # # Module techSupport configuration. # # # Module telnetd configuration. # disable telnet # # Module tftpd configuration. # # # Module thttpd configuration. # # # Module twamp configuration. # # # Module vmt configuration. # # # Module vrrp configuration. # # # Module vsm configuration. # # # Module vpex configuration. # Switch2: * EXOS-VM.1 # show configuration # # Module devmgr configuration. # configure snmp sysContact \"https://www.extremenetworks.com/support/\" configure sys-recovery-level switch reset # # Module vlan configuration. # configure vlan default delete ports all configure vr VR-Default delete ports 1-3 configure vr VR-Default add ports 1-2 configure vlan default delete ports 1-3 create vlan \"network_devices\" configure vlan network_devices tag 10 create vlan \"workstations1\" configure vlan workstations1 tag 5 create vlan \"workstations2\" configure vlan workstations2 tag 6 configure vlan network_devices add ports 1,3 tagged configure vlan workstations1 add ports 1,3 tagged configure vlan workstations2 add ports 1,3 tagged configure vlan workstations2 add ports 2 untagged configure vlan network_devices ipaddress 10.3.31.34 255.255.255.240 # # Module mcmgr configuration. # # # Module otm configuration. # configure virtual-network add network ports 1-2 # # Module fdb configuration. # disable iparp vr VR-Mgmt refresh disable neighbor-discovery vr VR-Mgmt refresh # # Module rtmgr configuration. # configure iproute add default 10.3.31.46 enable icmp useredirects # # Module policy configuration. # configure policy slices tci-overwrite 0 # # Module aaa configuration. # configure account admin encrypted \"$5$LVUMiH$OmC73PnstIHrVfPRZiAJdGyv.u4rlpdGFNscvg5P7A5\" # # Module acl configuration. # # # Module bfd configuration. # # # Module bgp configuration. # # # Module cfgmgr configuration. # # # Module dnsAnalytics configuration. # # # Module dosprotect configuration. # # # Module dot1ag configuration. # # # Module eaps configuration. # # # Module edp configuration. # # # Module elrp configuration. # # # Module ems configuration. # # # Module epm configuration. # # # Module erps configuration. # # # Module esrp configuration. # # # Module etmon configuration. # # # Module exsshd configuration. # enable ssh2 # # Module hal configuration. # configure ports 1 debounce time 0 configure ports 2 debounce time 0 configure ports 3 debounce time 0 # # Module idMgr configuration. # # # Module ipSecurity configuration. # # # Module isis configuration. # # # Module lldp configuration. # disable lldp ports 3 # # Module mrp configuration. # # # Module msdp configuration. # # # Module netLogin configuration. # # # Module netTools configuration. # # # Module nodealias configuration. # configure nodealias ports 1 maxentries 4096 configure nodealias ports 2 maxentries 4096 # # Module ntp configuration. # # # Module ospf configuration. # # # Module ospfv3 configuration. # # # Module pim configuration. # # # Module poe configuration. # # # Module rip configuration. # # # Module ripng configuration. # # # Module snmpMaster configuration. # configure snmpv3 engine-id 03:08:00:27:87:1f:97 # # Module stp configuration. # configure mstp region 080027871f97 disable stpd s0 # # Module techSupport configuration. # # # Module telnetd configuration. # disable telnet # # Module tftpd configuration. # # # Module thttpd configuration. # # # Module twamp configuration. # # # Module vmt configuration. # # # Module vrrp configuration. # # # Module vsm configuration. # # # Module vpex configuration. #","title":"IP-osoitteisuus"},{"location":"E04/#ip-osoitteisuus","text":"Ensin pit\u00e4\u00e4 lis\u00e4t\u00e4 vyos -reititin verkkoon. Teen t\u00e4m\u00e4n kytkem\u00e4ll\u00e4 Switch2 ja vyos:in yhteen uuteen verkkoon virtuaaliboxissa. N\u00e4ihin kumpaankin lis\u00e4\u00e4n uuden internal network adapterin ja nime\u00e4n sen RtoSW. T\u00e4m\u00e4n j\u00e4lkeen verkon fyysinen topologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4: Portit tulevat n\u00e4ytt\u00e4m\u00e4\u00e4n t\u00e4lt\u00e4:","title":"IP-osoitteisuus"},{"location":"E04/#vyos-asetukset","text":"Haluan lis\u00e4t\u00e4 vyos eth0 rajapintaan descriptionin \"toRtoSW\" selveyden takia. Kirjaudun sis\u00e4\u00e4n ja menen configure -moodiin. Sen j\u00e4lkeen sy\u00f6t\u00e4n komentoriville set interfaces ethernet eth0 description toRtoSW . T\u00e4m\u00e4n j\u00e4lkeen alan muuttamaan itse eth0 rajapinnan konfiguraatiota. Konfiguroin teht\u00e4v\u00e4nannon mukaan ekat VLANit niin, ett\u00e4 minun Exercise 02 tekem\u00e4t aliverkot olisivat n\u00e4iss\u00e4. N\u00e4ihin VLANeihin tulee minun Lubuntut. Lajittelen vyos -gateway/router niin, ett\u00e4 se on kaikkien aliverkkojen viimeinen k\u00e4ytett\u00e4v\u00e4 IP-osoite. T\u00e4m\u00e4n j\u00e4lkeen k\u00e4yt\u00e4n show interfaces -komentoa n\u00e4hd\u00e4kseni minun rajapinnat. N\u00e4en, ett\u00e4 VLANit ovat konfiguroitu. Tallennan n\u00e4m\u00e4 k\u00e4ytt\u00e4m\u00e4ll\u00e4 commit ja save -komentoa. Palaan show -moodiin tarkastamaan asetuksiani.","title":"vyos asetukset"},{"location":"E04/#lubuntujen-asetukset","text":"Lubuntu -ty\u00f6asemien verkkoasetukset pit\u00e4\u00e4 vaihtaa uuden verkkolajitelman mukaisesti. Kuvassa n\u00e4kyy Lubuntujen uudet verkkoasetukset. Lubuntujen IP-osoitteet ovat heid\u00e4n aliverkkojen ensimm\u00e4iset k\u00e4ytett\u00e4v\u00e4t IP-osoitteet, kun taas heid\u00e4n gateway (vyos) on heid\u00e4n aliverkon viimeinen k\u00e4ytett\u00e4v\u00e4 IP-osoite.","title":"Lubuntujen asetukset"},{"location":"E04/#kytkimien-asetukset","text":"Seuraavaksi luon uuden VLANin jonka nimeksi tulee network_devices . Annan niille uuden Ethernet 802.1Q tagin joka on t\u00e4ss\u00e4 tapauksessa tag 10. T\u00e4m\u00e4n j\u00e4lkeen portit jotka osoittavat vyos reittimeen ja kytkimiin t\u00e4g\u00e4t\u00e4\u00e4n. Kun portit on t\u00e4g\u00e4tty, exercise 02 asennetut IP-osoitteet kytkimille pit\u00e4\u00e4 poistaa. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennolla unconfigure vlan <vlan> ipaddress . T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4mme kytkimille Exercise 03 tehdyn IP-osoitteen ja maskin komennolla configure vlan network_devices ipaddress <ip> <mask> : HUOM!!! Kuvassa n\u00e4kyv\u00e4t IP osoitteet eiv\u00e4t ole lopullisia IP-osoitteita joita k\u00e4ytin. Vaikka n\u00e4m\u00e4 toimivat, niin vaihdoin subnettausta hieman jotta minulla riitt\u00e4\u00e4 IP-osoitteita seuraaviin teht\u00e4viin. Todelliset IP-osoitteet n\u00e4et t\u00e4m\u00e4n osion lopussa. Sitten viel\u00e4 sy\u00f6t\u00e4n kytkimille gateway IP-osoitteen. Tarkoitus on, ett\u00e4 jokaisen aliverkon viimeinen k\u00e4ytett\u00e4v\u00e4 IP-osoite on gateway:n IP, joten t\u00e4ss\u00e4 tapauksessa se on 10.3.31.46. T\u00e4m\u00e4 lis\u00e4t\u00e4\u00e4n komennolla: configure iproute add default <ip of router> . Viimeiseksi lis\u00e4t\u00e4\u00e4n t\u00e4m\u00e4 aliverkko vyos -reitittimmelle komennolla set interfaces ethernet eth0 vif 10 address 10.3.31.46/28 . Lopulta minun (lopullinen) aliverkoitus n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4:","title":"Kytkimien asetukset"},{"location":"E04/#the-moment-of-truth","text":"Nyt testaan verkon toimivuutta pingaamalla ja tracerouttaamalla ty\u00f6asemia. Mit\u00e4k\u00f6h\u00e4n tapahtuu? Kaikki n\u00e4ytt\u00e4\u00e4 toimivan kuten pit\u00e4\u00e4!","title":"The moment of truth"},{"location":"E04/#konffaukset","text":"network_devices konfiguroinnit ovat t\u00e4ss\u00e4: VYOS: vyos@vyos:~$ show configuration interfaces { interfaces { ethernet eth0 { description toRtoSW duplex auto hw-id 08:00:27:63:a0:05 smp-affinity auto speed auto vif 5 { address 192.168.89.62/26 description workstations1 } vif 6 { address 192.168.89.126/26 description workstations2 } vif 10 { address 10.3.31.46/28 description netdev } } loopback lo { } } protocols { } service { ssh { port 22 } } system { config-management { commit-revisions 100 } console { device ttyS0 { speed 9600 } } host-name vyos login { user vyos { authentication { encrypted-password **************** plaintext-password **************** } level admin } } syslog { global { facility all { level info } facility protocols { level debug } } } time-zone UTC } Switch1: * Switch1.1 # show configuration # # Module devmgr configuration. # configure snmp sysName \"Switch1\" configure snmp sysContact \"https://www.extremenetworks.com/support/\" configure sys-recovery-level switch reset # # Module vlan configuration. # configure vlan default delete ports all configure vr VR-Default delete ports 1-2 configure vr VR-Default add ports 1-2 configure vlan default delete ports 1-2 create vlan \"network_devices\" configure vlan network_devices tag 10 create vlan \"workstations\" configure vlan workstations tag 5 create vlan \"workstations2\" configure vlan workstations2 tag 6 configure vlan network_devices add ports 2 tagged configure vlan workstations add ports 2 tagged configure vlan workstations add ports 1 untagged configure vlan workstations2 add ports 2 tagged configure vlan network_devices ipaddress 10.3.31.33 255.255.255.240 # # Module mcmgr configuration. # # # Module otm configuration. # # # Module fdb configuration. # disable iparp vr VR-Mgmt refresh disable neighbor-discovery vr VR-Mgmt refresh # # Module rtmgr configuration. # configure iproute add default 10.3.31.46 enable icmp useredirects # # Module policy configuration. # configure policy slices tci-overwrite 0 # # Module aaa configuration. # configure account admin encrypted \"$5$LVUMiH$OmC73PnstIHrVfPRZiAJdGyv.u4rlpdGFNscvg5P7A5\" # # Module acl configuration. # # # Module bfd configuration. # # # Module bgp configuration. # # # Module cfgmgr configuration. # # # Module dnsAnalytics configuration. # # # Module dosprotect configuration. # # # Module dot1ag configuration. # # # Module eaps configuration. # # # Module edp configuration. # # # Module elrp configuration. # # # Module ems configuration. # # # Module epm configuration. # # # Module erps configuration. # # # Module esrp configuration. # # # Module etmon configuration. # # # Module exsshd configuration. # enable ssh2 # # Module hal configuration. # configure ports 1 debounce time 0 configure ports 2 debounce time 0 # # Module idMgr configuration. # # # Module ipSecurity configuration. # # # Module isis configuration. # # # Module lldp configuration. # # # Module mrp configuration. # # # Module msdp configuration. # # # Module netLogin configuration. # # # Module netTools configuration. # # # Module nodealias configuration. # # # Module ntp configuration. # # # Module ospf configuration. # # # Module ospfv3 configuration. # # # Module pim configuration. # # # Module poe configuration. # # # Module rip configuration. # # # Module ripng configuration. # # # Module snmpMaster configuration. # configure snmpv3 engine-id 03:08:00:27:87:1f:97 # # Module stp configuration. # configure mstp region 080027871f97 disable stpd s0 # # Module techSupport configuration. # # # Module telnetd configuration. # disable telnet # # Module tftpd configuration. # # # Module thttpd configuration. # # # Module twamp configuration. # # # Module vmt configuration. # # # Module vrrp configuration. # # # Module vsm configuration. # # # Module vpex configuration. # Switch2: * EXOS-VM.1 # show configuration # # Module devmgr configuration. # configure snmp sysContact \"https://www.extremenetworks.com/support/\" configure sys-recovery-level switch reset # # Module vlan configuration. # configure vlan default delete ports all configure vr VR-Default delete ports 1-3 configure vr VR-Default add ports 1-2 configure vlan default delete ports 1-3 create vlan \"network_devices\" configure vlan network_devices tag 10 create vlan \"workstations1\" configure vlan workstations1 tag 5 create vlan \"workstations2\" configure vlan workstations2 tag 6 configure vlan network_devices add ports 1,3 tagged configure vlan workstations1 add ports 1,3 tagged configure vlan workstations2 add ports 1,3 tagged configure vlan workstations2 add ports 2 untagged configure vlan network_devices ipaddress 10.3.31.34 255.255.255.240 # # Module mcmgr configuration. # # # Module otm configuration. # configure virtual-network add network ports 1-2 # # Module fdb configuration. # disable iparp vr VR-Mgmt refresh disable neighbor-discovery vr VR-Mgmt refresh # # Module rtmgr configuration. # configure iproute add default 10.3.31.46 enable icmp useredirects # # Module policy configuration. # configure policy slices tci-overwrite 0 # # Module aaa configuration. # configure account admin encrypted \"$5$LVUMiH$OmC73PnstIHrVfPRZiAJdGyv.u4rlpdGFNscvg5P7A5\" # # Module acl configuration. # # # Module bfd configuration. # # # Module bgp configuration. # # # Module cfgmgr configuration. # # # Module dnsAnalytics configuration. # # # Module dosprotect configuration. # # # Module dot1ag configuration. # # # Module eaps configuration. # # # Module edp configuration. # # # Module elrp configuration. # # # Module ems configuration. # # # Module epm configuration. # # # Module erps configuration. # # # Module esrp configuration. # # # Module etmon configuration. # # # Module exsshd configuration. # enable ssh2 # # Module hal configuration. # configure ports 1 debounce time 0 configure ports 2 debounce time 0 configure ports 3 debounce time 0 # # Module idMgr configuration. # # # Module ipSecurity configuration. # # # Module isis configuration. # # # Module lldp configuration. # disable lldp ports 3 # # Module mrp configuration. # # # Module msdp configuration. # # # Module netLogin configuration. # # # Module netTools configuration. # # # Module nodealias configuration. # configure nodealias ports 1 maxentries 4096 configure nodealias ports 2 maxentries 4096 # # Module ntp configuration. # # # Module ospf configuration. # # # Module ospfv3 configuration. # # # Module pim configuration. # # # Module poe configuration. # # # Module rip configuration. # # # Module ripng configuration. # # # Module snmpMaster configuration. # configure snmpv3 engine-id 03:08:00:27:87:1f:97 # # Module stp configuration. # configure mstp region 080027871f97 disable stpd s0 # # Module techSupport configuration. # # # Module telnetd configuration. # disable telnet # # Module tftpd configuration. # # # Module thttpd configuration. # # # Module twamp configuration. # # # Module vmt configuration. # # # Module vrrp configuration. # # # Module vsm configuration. # # # Module vpex configuration. #","title":"Konffaukset"},{"location":"E05/","text":"DHCP ja staattinen reititys Ensin kloonaan ja kytken uudet laitteet vyos2 ja Lubuntu3 teht\u00e4v\u00e4\u00e4 varten. Kaapelointi tulee tapahtumaan kartan mukaan: Aloitan kytkem\u00e4ll\u00e4 Lubuntu3 ja vyos2 yhteen LAN4 kautta. T\u00e4m\u00e4n j\u00e4lkeen annan uuden aliverkon vyos2:selle k\u00e4ytt\u00e4m\u00e4ll\u00e4 komentoa set interface ethernet eth0 address 192.168.89.190/26 T\u00e4m\u00e4n j\u00e4lkeen annan Lubuntu3 IP osoitteen ja gatewayn. Lopulta asetukset n\u00e4ytt\u00e4v\u00e4t t\u00e4lt\u00e4: T\u00e4m\u00e4n j\u00e4lkeen testaan toimivuutta pingill\u00e4: Toimivuus on testattu! Jatkan kytkem\u00e4ll\u00e4 Vyos2 ja Vyos1 yhteen RtoR internal network kautta. Asetan kummallekkin reitittimelle IP-osoitteen heid\u00e4n uuteen rajapintaan: Testaan viel\u00e4, ett\u00e4 kaikki toimivat pingill\u00e4... Kaikki toimivat kuten pit\u00e4\u00e4. Nykyinen verkkotopologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4: DHCP asentaminen Aloitan DHCP asentaminen vyos:seille. Vyosiin voi lis\u00e4t\u00e4 DHCP palvelimen configure -moodissa. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennoilla: set service dhcp-server shared-network-name workstations1 subnet 192.168.89.0/26 default-router 192.168.89.62 set service dhcp-server shared-network-name workstations1 subnet 192.168.89.0/26 range PCs start 192.168.89.1 set service dhcp-server shared-network-name workstations1 subnet 192.168.89.0/26 range PCs stop 192.168.89.61 Teen t\u00e4m\u00e4n jokaiselle aliverkolle jotka tarvitsevat DHCP:ta. T\u00e4ss\u00e4 tapauksessa ne ovat kaikki, paitsi network_devices. T\u00e4m\u00e4n j\u00e4lkeen vaihdan Lubuntujen manuaaliset verkkoasetukset automaattiseen ja katsotaan miten k\u00e4y... Viel\u00e4 lis\u00e4ksi mielenkiinnon perustein katson DHCP palvelimen ja Lubuntu1 v\u00e4list\u00e4 keskustelua wiresharkilla: Kuten wiresharkin tuloksista n\u00e4kee, ty\u00f6asema ensin huhuilee yleiseen broadcast osoitteeseen DHCPdiscover , ett\u00e4 onko verkossa DHCP palvelinta. T\u00e4m\u00e4n j\u00e4lkeen DHCP palvelin (vyos) vastaa DHCPoffer paketilla ja antaa ty\u00f6asemalle konfiguraatio parametrit. Sitten ty\u00f6asema vastaa t\u00e4h\u00e4n DHCPrequest paketilla joka pyyt\u00e4\u00e4 dhcp binding n\u00e4ill\u00e4 parametreilla. Viimeiseksi DHCP palvelin vastaa t\u00e4h\u00e4n DHCPack paketilla, joka vahvistaa dhcp bindauksen ja parametrit kummallekkin osapuolelle. Kuvasta n\u00e4kee, ett\u00e4 lubuntu1 on saanut IP-osoitteen onnistuneesti. On mahdollista tarkistaa dhcp leases menem\u00e4ll\u00e4 vyosin komentoriville ja k\u00e4ytt\u00e4\u00e4 komentoa show dhcp server leases : Teen t\u00e4m\u00e4n saman toimenpiteen kaikille aliverkoille paitsi network_devices, kuten sanoin aiemmin. Staattinen reititys Seuraavaksi min\u00e4 s\u00e4\u00e4d\u00e4n staattisen reitityksen vyos1 ja vyos2 v\u00e4lille. Saan luotua staattisen reitityksen k\u00e4ytt\u00e4m\u00e4ll\u00e4 komentoa set protocols static route <subnet> next-hop <address> . T\u00e4ss\u00e4 tapauksessa vyos1 sy\u00f6t\u00e4n komennon: set protocols static route 192.168.89.128/26 next-hop 10.3.31.130 vyos2 sy\u00f6t\u00e4n komennot: set protocols static route 192.168.89.0/26 next-hop 10.3.31.129 ja set protocols static route 192.168.89.64/26 next-hop 10.3.31.129 T\u00e4m\u00e4n j\u00e4lkeen testaan staattisen reitityksen toimivuutta ping -ja traceroute komennoilla: Pingit rullaa hienosti! Konffaukset Koko verkon topologia n\u00e4kyy t\u00e4ss\u00e4: VYOS1: vyos@vyos:~$ show configuration interfaces { ethernet eth0 { description toRtoSW duplex auto hw-id 08:00:27:63:a0:05 smp-affinity auto speed auto vif 5 { address 192.168.89.62/26 description workstations1 } vif 6 { address 192.168.89.126/26 description workstations2 } vif 10 { address 10.3.31.30/27 description netdev } } ethernet eth2 { address 10.3.31.129/30 description toRtoR hw-id 08:00:27:e6:db:28 } loopback lo { } } protocols { static { route 192.168.89.128/26 { next-hop 10.3.31.130 { } } } } service { dhcp-server { shared-network-name workstations1 { subnet 192.168.89.0/26 { default-router 192.168.89.62 range PCs { start 192.168.89.1 stop 192.168.89.61 } } } shared-network-name workstations2 { subnet 192.168.89.64/26 { default-router 192.168.89.126 range PCs { start 192.168.89.65 stop 192.168.89.125 } } } } ssh { port 22 } } system { config-management { commit-revisions 100 } console { device ttyS0 { speed 9600 } } host-name vyos login { user vyos { authentication { encrypted-password **************** plaintext-password **************** } level admin } } syslog { global { facility all { level info } facility protocols { level debug } } } time-zone UTC } VYOS2: vyos@vyos:~$ show configuration interfaces { ethernet eth0 { address 192.168.89.190/26 description toLAN4 duplex auto hw-id 08:00:27:89:98:4c smp-affinity auto speed auto } ethernet eth1 { address 10.3.31.130/30 description toRtoR hw-id 08:00:27:c1:29:c9 } loopback lo { } } protocols { static { route 192.168.89.0/26 { next-hop 10.3.31.129 { } } route 192.168.89.64/26 { next-hop 10.3.31.129 { } } } } service { dhcp-server { shared-network-name workstations3 { subnet 192.168.89.128/26 { default-router 192.168.89.190 range PCs { start 192.168.89.129 stop 192.168.89.189 } } } } ssh { port 22 } } system { config-management { commit-revisions 100 } console { device ttyS0 { speed 9600 } } host-name vyos login { user vyos { authentication { encrypted-password **************** plaintext-password **************** } level admin } } syslog { global { facility all { level info } facility protocols { level debug } } } time-zone UTC }","title":"DHCP ja staattinen reititys"},{"location":"E05/#dhcp-ja-staattinen-reititys","text":"Ensin kloonaan ja kytken uudet laitteet vyos2 ja Lubuntu3 teht\u00e4v\u00e4\u00e4 varten. Kaapelointi tulee tapahtumaan kartan mukaan: Aloitan kytkem\u00e4ll\u00e4 Lubuntu3 ja vyos2 yhteen LAN4 kautta. T\u00e4m\u00e4n j\u00e4lkeen annan uuden aliverkon vyos2:selle k\u00e4ytt\u00e4m\u00e4ll\u00e4 komentoa set interface ethernet eth0 address 192.168.89.190/26 T\u00e4m\u00e4n j\u00e4lkeen annan Lubuntu3 IP osoitteen ja gatewayn. Lopulta asetukset n\u00e4ytt\u00e4v\u00e4t t\u00e4lt\u00e4: T\u00e4m\u00e4n j\u00e4lkeen testaan toimivuutta pingill\u00e4: Toimivuus on testattu! Jatkan kytkem\u00e4ll\u00e4 Vyos2 ja Vyos1 yhteen RtoR internal network kautta. Asetan kummallekkin reitittimelle IP-osoitteen heid\u00e4n uuteen rajapintaan: Testaan viel\u00e4, ett\u00e4 kaikki toimivat pingill\u00e4... Kaikki toimivat kuten pit\u00e4\u00e4. Nykyinen verkkotopologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4:","title":"DHCP ja staattinen reititys"},{"location":"E05/#dhcp-asentaminen","text":"Aloitan DHCP asentaminen vyos:seille. Vyosiin voi lis\u00e4t\u00e4 DHCP palvelimen configure -moodissa. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennoilla: set service dhcp-server shared-network-name workstations1 subnet 192.168.89.0/26 default-router 192.168.89.62 set service dhcp-server shared-network-name workstations1 subnet 192.168.89.0/26 range PCs start 192.168.89.1 set service dhcp-server shared-network-name workstations1 subnet 192.168.89.0/26 range PCs stop 192.168.89.61 Teen t\u00e4m\u00e4n jokaiselle aliverkolle jotka tarvitsevat DHCP:ta. T\u00e4ss\u00e4 tapauksessa ne ovat kaikki, paitsi network_devices. T\u00e4m\u00e4n j\u00e4lkeen vaihdan Lubuntujen manuaaliset verkkoasetukset automaattiseen ja katsotaan miten k\u00e4y... Viel\u00e4 lis\u00e4ksi mielenkiinnon perustein katson DHCP palvelimen ja Lubuntu1 v\u00e4list\u00e4 keskustelua wiresharkilla: Kuten wiresharkin tuloksista n\u00e4kee, ty\u00f6asema ensin huhuilee yleiseen broadcast osoitteeseen DHCPdiscover , ett\u00e4 onko verkossa DHCP palvelinta. T\u00e4m\u00e4n j\u00e4lkeen DHCP palvelin (vyos) vastaa DHCPoffer paketilla ja antaa ty\u00f6asemalle konfiguraatio parametrit. Sitten ty\u00f6asema vastaa t\u00e4h\u00e4n DHCPrequest paketilla joka pyyt\u00e4\u00e4 dhcp binding n\u00e4ill\u00e4 parametreilla. Viimeiseksi DHCP palvelin vastaa t\u00e4h\u00e4n DHCPack paketilla, joka vahvistaa dhcp bindauksen ja parametrit kummallekkin osapuolelle. Kuvasta n\u00e4kee, ett\u00e4 lubuntu1 on saanut IP-osoitteen onnistuneesti. On mahdollista tarkistaa dhcp leases menem\u00e4ll\u00e4 vyosin komentoriville ja k\u00e4ytt\u00e4\u00e4 komentoa show dhcp server leases : Teen t\u00e4m\u00e4n saman toimenpiteen kaikille aliverkoille paitsi network_devices, kuten sanoin aiemmin.","title":"DHCP asentaminen"},{"location":"E05/#staattinen-reititys","text":"Seuraavaksi min\u00e4 s\u00e4\u00e4d\u00e4n staattisen reitityksen vyos1 ja vyos2 v\u00e4lille. Saan luotua staattisen reitityksen k\u00e4ytt\u00e4m\u00e4ll\u00e4 komentoa set protocols static route <subnet> next-hop <address> . T\u00e4ss\u00e4 tapauksessa vyos1 sy\u00f6t\u00e4n komennon: set protocols static route 192.168.89.128/26 next-hop 10.3.31.130 vyos2 sy\u00f6t\u00e4n komennot: set protocols static route 192.168.89.0/26 next-hop 10.3.31.129 ja set protocols static route 192.168.89.64/26 next-hop 10.3.31.129 T\u00e4m\u00e4n j\u00e4lkeen testaan staattisen reitityksen toimivuutta ping -ja traceroute komennoilla: Pingit rullaa hienosti!","title":"Staattinen reititys"},{"location":"E05/#konffaukset","text":"Koko verkon topologia n\u00e4kyy t\u00e4ss\u00e4: VYOS1: vyos@vyos:~$ show configuration interfaces { ethernet eth0 { description toRtoSW duplex auto hw-id 08:00:27:63:a0:05 smp-affinity auto speed auto vif 5 { address 192.168.89.62/26 description workstations1 } vif 6 { address 192.168.89.126/26 description workstations2 } vif 10 { address 10.3.31.30/27 description netdev } } ethernet eth2 { address 10.3.31.129/30 description toRtoR hw-id 08:00:27:e6:db:28 } loopback lo { } } protocols { static { route 192.168.89.128/26 { next-hop 10.3.31.130 { } } } } service { dhcp-server { shared-network-name workstations1 { subnet 192.168.89.0/26 { default-router 192.168.89.62 range PCs { start 192.168.89.1 stop 192.168.89.61 } } } shared-network-name workstations2 { subnet 192.168.89.64/26 { default-router 192.168.89.126 range PCs { start 192.168.89.65 stop 192.168.89.125 } } } } ssh { port 22 } } system { config-management { commit-revisions 100 } console { device ttyS0 { speed 9600 } } host-name vyos login { user vyos { authentication { encrypted-password **************** plaintext-password **************** } level admin } } syslog { global { facility all { level info } facility protocols { level debug } } } time-zone UTC } VYOS2: vyos@vyos:~$ show configuration interfaces { ethernet eth0 { address 192.168.89.190/26 description toLAN4 duplex auto hw-id 08:00:27:89:98:4c smp-affinity auto speed auto } ethernet eth1 { address 10.3.31.130/30 description toRtoR hw-id 08:00:27:c1:29:c9 } loopback lo { } } protocols { static { route 192.168.89.0/26 { next-hop 10.3.31.129 { } } route 192.168.89.64/26 { next-hop 10.3.31.129 { } } } } service { dhcp-server { shared-network-name workstations3 { subnet 192.168.89.128/26 { default-router 192.168.89.190 range PCs { start 192.168.89.129 stop 192.168.89.189 } } } } ssh { port 22 } } system { config-management { commit-revisions 100 } console { device ttyS0 { speed 9600 } } host-name vyos login { user vyos { authentication { encrypted-password **************** plaintext-password **************** } level admin } } syslog { global { facility all { level info } facility protocols { level debug } } } time-zone UTC }","title":"Konffaukset"},{"location":"E06/","text":"Fyysinen harjoite Aloitan katsomalla verkon fyysist\u00e4 topologiaa ja listaamalla tarvittavat laitteet ja kaapelit ensin. T\u00e4st\u00e4 n\u00e4hd\u00e4\u00e4n, ett\u00e4 tarvitsen ainakin: - 2 Kykint\u00e4 - 2 Reititint\u00e4 - 3 Ty\u00f6asemaa - Ainakin 6 eri kaapelia kytkem\u00e4\u00e4n laitteet toisiinsa Laitteet Toimiva kytkin meid\u00e4n tarkoitukseen on: HPE 1820-8G Switch Linkki HP:n sivuille T\u00e4rke\u00e4t tiedot ovat: - 8 RJ-45 10/100/1000 porttia - Ulottuvuudet ovat: (metric)25.4 x 15.95 x 4.39 cm, (imperial)10 x 6.28 x 1.73 in - Paino: 0,82kg - Maksaa noin 120\u20ac/kpl Seuraavaksi reititin meid\u00e4n tarkoitukseen on: NETGEAR GS752TP Linkki netgear sivulle T\u00e4rke\u00e4t tiedot ovat: - 48 RJ-45 Gigabit porttia koska miksi ei - Ulottuvuudet ovat: 440 x 316 x 43 mm - Paino: 5,1kg - Maksaa noin 440\u20ac/kpl Tarvitsen viel\u00e4 ty\u00f6aseman joka tulee olemaan: HP Z2 G4 Workstation Linkki kaupan sivuille T\u00e4rke\u00e4t tiedot ovat: - Intel I350-T2 Verkkosovitin jossa 2 RJ-45 porttia - Ulkomitat (PxSxK) 16.9 cm x 43.5 cm x 35.6 cm - Paino: 7kg - Maksaa noin 993,63\u20ac/kpl Kaikki laitteet tukevat RJ-45 liitint\u00e4, joten kuparikaapeleilla menn\u00e4\u00e4n. Teht\u00e4v\u00e4nannossa ei ole kerrottu, ett\u00e4 ymp\u00e4rist\u00f6ss\u00e4 olisi elektromagneettista h\u00e4irint\u00e4\u00e4, joten kaapelien suojaus ei ole v\u00e4ltt\u00e4m\u00e4t\u00f6nt\u00e4. Verkkolaitteiden v\u00e4liset yhteydet tehd\u00e4\u00e4n 30m CAT5e F/UTP verkkokaapeleilla. Linkki kaupan sivuille T\u00e4rke\u00e4t tiedot ovat: - 30m pitk\u00e4 - CAT5e luokka - RJ45 liitin - F/UTP suojauksella - Maksaa 28,99\u20ac/kpl T\u00e4m\u00e4n lis\u00e4ksi p\u00e4\u00e4telaitteiden ja verkkolaitteiden v\u00e4linen yhteys tehd\u00e4\u00e4n 10m CAT5e U/UTP verkkokaapeleilla. Linkki kaupan sivuille T\u00e4rke\u00e4t tiedot ovat: - 10m pitk\u00e4 - CAT5e luokka - RJ45 liitin - U/UTP suojaus - Maksaa 10,99\u20ac/kpl Jokainen verkkolaite tulee olemaan laitetelineen tai kaapin sis\u00e4ll\u00e4 lukittuna. Koska verkkolaitteita ei ole paljoa, pieni sein\u00e4kaappi k\u00e4y. K\u00e4yt\u00e4n t\u00e4ss\u00e4 tilanteessa Toten WM 6409 9U sein\u00e4kaappia. Linkki kaupan sivuille T\u00e4rke\u00e4t tiedot ovat: - 9U kapasiteetti (19 tuuman standardi) - Kaapin ulottuvuudet ovat: 600 mm x 450 mm x 501 mm - Maksimi kuorma 60kg - Kaapelointi katosta tai pohjasta - Maksaa 174,90\u20ac/kpl Koska laitteita on vain yksi per kaappi, ylim\u00e4\u00e4r\u00e4isi\u00e4 tuulettimia ei tarvita. Linkki kaapin dokumentaatioon T\u00e4st\u00e4 syntyy kaikkien laitteiden yms. budjetti: Laite Hinta yhteens\u00e4 HPE 1820-8G Switch 2x 240,0\u20ac Netgear GS752TP 2x 880,0\u20ac HP Z2 G4 Ty\u00f6asema 3x 2980,89\u20ac 30m CAT5e verkkokaapeli 3x 86,97\u20ac 10m CAT5e verkkokaapeli 3x 32,97\u20ac Toten WM 6409 9U Sein\u00e4kaappi 4x 699,60\u20ac Yhteens\u00e4 n\u00e4m\u00e4 kaikki maksavat 4920,43\u20ac Asennus Kaikki verkkolaitteet tulevat omiin sein\u00e4kaappeihin. Virtajohdot ja ethernet kaapelit vedet\u00e4\u00e4n joko yl\u00e4- tai alapaneelista, riippuen miten sein\u00e4kaappi asennetaan. Ylim\u00e4\u00e4r\u00e4isi\u00e4 tuulettimia ei tarvitse asentaa, koska laitteita on vain yksi per kaappi. Sein\u00e4kaapeissa tulee valmiina yksi alusta johon mahtuu 1U verkkolaite johon kyseinen verkkolaite asenntaan. T\u00e4\u00e4lt\u00e4 l\u00f6yd\u00e4t sein\u00e4kaapin dokumentaation Ty\u00f6pisteiden ja verkkolaitteiden kaapelointi tapahtuu Cat5e ethernet kaapelilla joissa on RJ-45 liitin. Kaikki laitteet tukevat t\u00e4t\u00e4 liitint\u00e4, mukaanlukien ty\u00f6pisteet, joissa on Intel I350-T2 Verkkosovitin. Hyvin tarkat piirustus suunnitelman n\u00e4et t\u00e4st\u00e4:","title":"Fyysinen harjoite"},{"location":"E06/#fyysinen-harjoite","text":"Aloitan katsomalla verkon fyysist\u00e4 topologiaa ja listaamalla tarvittavat laitteet ja kaapelit ensin. T\u00e4st\u00e4 n\u00e4hd\u00e4\u00e4n, ett\u00e4 tarvitsen ainakin: - 2 Kykint\u00e4 - 2 Reititint\u00e4 - 3 Ty\u00f6asemaa - Ainakin 6 eri kaapelia kytkem\u00e4\u00e4n laitteet toisiinsa","title":"Fyysinen harjoite"},{"location":"E06/#laitteet","text":"Toimiva kytkin meid\u00e4n tarkoitukseen on: HPE 1820-8G Switch Linkki HP:n sivuille T\u00e4rke\u00e4t tiedot ovat: - 8 RJ-45 10/100/1000 porttia - Ulottuvuudet ovat: (metric)25.4 x 15.95 x 4.39 cm, (imperial)10 x 6.28 x 1.73 in - Paino: 0,82kg - Maksaa noin 120\u20ac/kpl Seuraavaksi reititin meid\u00e4n tarkoitukseen on: NETGEAR GS752TP Linkki netgear sivulle T\u00e4rke\u00e4t tiedot ovat: - 48 RJ-45 Gigabit porttia koska miksi ei - Ulottuvuudet ovat: 440 x 316 x 43 mm - Paino: 5,1kg - Maksaa noin 440\u20ac/kpl Tarvitsen viel\u00e4 ty\u00f6aseman joka tulee olemaan: HP Z2 G4 Workstation Linkki kaupan sivuille T\u00e4rke\u00e4t tiedot ovat: - Intel I350-T2 Verkkosovitin jossa 2 RJ-45 porttia - Ulkomitat (PxSxK) 16.9 cm x 43.5 cm x 35.6 cm - Paino: 7kg - Maksaa noin 993,63\u20ac/kpl Kaikki laitteet tukevat RJ-45 liitint\u00e4, joten kuparikaapeleilla menn\u00e4\u00e4n. Teht\u00e4v\u00e4nannossa ei ole kerrottu, ett\u00e4 ymp\u00e4rist\u00f6ss\u00e4 olisi elektromagneettista h\u00e4irint\u00e4\u00e4, joten kaapelien suojaus ei ole v\u00e4ltt\u00e4m\u00e4t\u00f6nt\u00e4. Verkkolaitteiden v\u00e4liset yhteydet tehd\u00e4\u00e4n 30m CAT5e F/UTP verkkokaapeleilla. Linkki kaupan sivuille T\u00e4rke\u00e4t tiedot ovat: - 30m pitk\u00e4 - CAT5e luokka - RJ45 liitin - F/UTP suojauksella - Maksaa 28,99\u20ac/kpl T\u00e4m\u00e4n lis\u00e4ksi p\u00e4\u00e4telaitteiden ja verkkolaitteiden v\u00e4linen yhteys tehd\u00e4\u00e4n 10m CAT5e U/UTP verkkokaapeleilla. Linkki kaupan sivuille T\u00e4rke\u00e4t tiedot ovat: - 10m pitk\u00e4 - CAT5e luokka - RJ45 liitin - U/UTP suojaus - Maksaa 10,99\u20ac/kpl Jokainen verkkolaite tulee olemaan laitetelineen tai kaapin sis\u00e4ll\u00e4 lukittuna. Koska verkkolaitteita ei ole paljoa, pieni sein\u00e4kaappi k\u00e4y. K\u00e4yt\u00e4n t\u00e4ss\u00e4 tilanteessa Toten WM 6409 9U sein\u00e4kaappia. Linkki kaupan sivuille T\u00e4rke\u00e4t tiedot ovat: - 9U kapasiteetti (19 tuuman standardi) - Kaapin ulottuvuudet ovat: 600 mm x 450 mm x 501 mm - Maksimi kuorma 60kg - Kaapelointi katosta tai pohjasta - Maksaa 174,90\u20ac/kpl Koska laitteita on vain yksi per kaappi, ylim\u00e4\u00e4r\u00e4isi\u00e4 tuulettimia ei tarvita. Linkki kaapin dokumentaatioon T\u00e4st\u00e4 syntyy kaikkien laitteiden yms. budjetti: Laite Hinta yhteens\u00e4 HPE 1820-8G Switch 2x 240,0\u20ac Netgear GS752TP 2x 880,0\u20ac HP Z2 G4 Ty\u00f6asema 3x 2980,89\u20ac 30m CAT5e verkkokaapeli 3x 86,97\u20ac 10m CAT5e verkkokaapeli 3x 32,97\u20ac Toten WM 6409 9U Sein\u00e4kaappi 4x 699,60\u20ac Yhteens\u00e4 n\u00e4m\u00e4 kaikki maksavat 4920,43\u20ac","title":"Laitteet"},{"location":"E06/#asennus","text":"Kaikki verkkolaitteet tulevat omiin sein\u00e4kaappeihin. Virtajohdot ja ethernet kaapelit vedet\u00e4\u00e4n joko yl\u00e4- tai alapaneelista, riippuen miten sein\u00e4kaappi asennetaan. Ylim\u00e4\u00e4r\u00e4isi\u00e4 tuulettimia ei tarvitse asentaa, koska laitteita on vain yksi per kaappi. Sein\u00e4kaapeissa tulee valmiina yksi alusta johon mahtuu 1U verkkolaite johon kyseinen verkkolaite asenntaan. T\u00e4\u00e4lt\u00e4 l\u00f6yd\u00e4t sein\u00e4kaapin dokumentaation Ty\u00f6pisteiden ja verkkolaitteiden kaapelointi tapahtuu Cat5e ethernet kaapelilla joissa on RJ-45 liitin. Kaikki laitteet tukevat t\u00e4t\u00e4 liitint\u00e4, mukaanlukien ty\u00f6pisteet, joissa on Intel I350-T2 Verkkosovitin. Hyvin tarkat piirustus suunnitelman n\u00e4et t\u00e4st\u00e4:","title":"Asennus"},{"location":"E07/","text":"STP Aloitan piirt\u00e4m\u00e4ll\u00e4 fyysisen topograafisen kartan tulevasta verkosta. Muunnin joidenkin LAN:ien numeroita, jotta selkeys pysyisi. Kloonaan kolmannen kytkimen ja alan asettamaan virtuaalikoneiden verkkoasetuksia kuvan mukaan. T\u00e4m\u00e4n j\u00e4lkeen aloitan kytkinten konfiguroinnin. Asetan uudet portit ja tagit kytkimille. Varmistan, ett\u00e4 ainakin yksi kytkin on pois p\u00e4\u00e4lt\u00e4 kun teen n\u00e4it\u00e4 asetuksia. VLAN tagit menev\u00e4t kuvan mukaisesti: T\u00e4m\u00e4n j\u00e4lkeen testaan verkon toimivuutta ty\u00f6asemilta: Ty\u00f6asemat n\u00e4kev\u00e4t Vyosin. Erinomaista! Nuking this network with no survivors Aika tehd\u00e4 looppi. Dokumentoin l\u00e4pp\u00e4rini tilaa ennen kun pist\u00e4n kytkimet p\u00e4\u00e4lle: CPU k\u00e4ytt\u00f6 leijuu noin 10-20% paikkeella. Aika pist\u00e4\u00e4 kytkimet p\u00e4\u00e4lle... Laitoin Lubuntut pingitt\u00e4m\u00e4\u00e4n toisiaan kun pistin kytkimet p\u00e4\u00e4lle. Mit\u00e4\u00e4n ei tapahtunut joten k\u00e4ynnistin Lubuntut uudelleen ja vaihdoin niiden MAC osoitteet. Samantien kun Lubuntut k\u00e4ynnistyiv\u00e4t, niin CPU usage hypp\u00e4si 100% ja l\u00e4pp\u00e4ri melkein leipo kiinni. Oletan, ett\u00e4 onnistuin packet stormin luomisessa. Tallensin muutaman screenshotin: STP aktivointi Aloitan STP konfiguroinnin, jotta minun l\u00e4pp\u00e4rin ei tarvitse k\u00e4rsi\u00e4 moisesta en\u00e4\u00e4. STP lis\u00e4t\u00e4\u00e4n VLAN:eihin komennolla configure stpd s0 add vlan <name> ports all . Lis\u00e4\u00e4n STP:n kaikkille kytkimille ja kaikille VLAN:eille. T\u00e4m\u00e4n j\u00e4lkeen komento enable stpd s0 kytkee STP:n p\u00e4\u00e4lle. Tarkastellaan CPU:n kuormaa kun aloitan ty\u00f6asemien v\u00e4lisen kommunikoinnin: L\u00e4pp\u00e4ri nyt tykk\u00e4\u00e4. Kaikki n\u00e4ytt\u00e4\u00e4 toimivan ongelmitta. STP konfigurointi Aloitan kytkinten porttien tarkastelun. Komennolla show stpd s0 ja show stpd s0 ports n\u00e4en kytkinten STP konfiguraatiot ja porttien tilat. T\u00e4st\u00e4 voin piirt\u00e4\u00e4 nykyisen STP topologian: Kuten t\u00e4st\u00e4 n\u00e4kee, Switch2 on sattumoisin root switch. T\u00e4m\u00e4 on hyv\u00e4, sill\u00e4 Switch2 on l\u00e4hin kytkin vyos reitittimeen. Porttien tilat ovat my\u00f6s hyv\u00e4t, joten n\u00e4it\u00e4 ei tarvitse muuttaa. Vaikka Switch2 on valittu root bridgeksi, aion silti vaihtaa sen prioriteetin pienimm\u00e4ksi sen oletusarvosta. Teen t\u00e4m\u00e4n komennolla configure stpd s0 priority 4096 . STP testausta Aloitan testauksen menem\u00e4ll\u00e4 ty\u00f6asemille ja pingitt\u00e4m\u00e4ll\u00e4 toisiaan. Kaiken teorian mukaan jos katkaisen yhteyden Switch1 ja Switch2 v\u00e4lilt\u00e4, niin reitti Switch1 ja Switch3 v\u00e4lill\u00e4 alkaisi rullaamaan. Voin testata t\u00e4t\u00e4 menem\u00e4ll\u00e4 Switch2:Selle ja k\u00e4ytt\u00e4m\u00e4ll\u00e4 komentoa disable ports 1 . Katsotaan, mit\u00e4 tapahtuu. N\u00e4en, ett\u00e4 ICMP paketit 441-450 Lubuntu1 puolelta katosivat portin sulkemisen j\u00e4lkeen. Samanlainen tilanne Lubuntu2 puolella. Pingit lopulta alkoivat rullaamaan portin disabloimisen j\u00e4lkeen. Erinomaista! Topologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4 portin sulkemisen j\u00e4lkeen:","title":"STP"},{"location":"E07/#stp","text":"Aloitan piirt\u00e4m\u00e4ll\u00e4 fyysisen topograafisen kartan tulevasta verkosta. Muunnin joidenkin LAN:ien numeroita, jotta selkeys pysyisi. Kloonaan kolmannen kytkimen ja alan asettamaan virtuaalikoneiden verkkoasetuksia kuvan mukaan. T\u00e4m\u00e4n j\u00e4lkeen aloitan kytkinten konfiguroinnin. Asetan uudet portit ja tagit kytkimille. Varmistan, ett\u00e4 ainakin yksi kytkin on pois p\u00e4\u00e4lt\u00e4 kun teen n\u00e4it\u00e4 asetuksia. VLAN tagit menev\u00e4t kuvan mukaisesti: T\u00e4m\u00e4n j\u00e4lkeen testaan verkon toimivuutta ty\u00f6asemilta: Ty\u00f6asemat n\u00e4kev\u00e4t Vyosin. Erinomaista!","title":"STP"},{"location":"E07/#nuking-this-network-with-no-survivors","text":"Aika tehd\u00e4 looppi. Dokumentoin l\u00e4pp\u00e4rini tilaa ennen kun pist\u00e4n kytkimet p\u00e4\u00e4lle: CPU k\u00e4ytt\u00f6 leijuu noin 10-20% paikkeella. Aika pist\u00e4\u00e4 kytkimet p\u00e4\u00e4lle... Laitoin Lubuntut pingitt\u00e4m\u00e4\u00e4n toisiaan kun pistin kytkimet p\u00e4\u00e4lle. Mit\u00e4\u00e4n ei tapahtunut joten k\u00e4ynnistin Lubuntut uudelleen ja vaihdoin niiden MAC osoitteet. Samantien kun Lubuntut k\u00e4ynnistyiv\u00e4t, niin CPU usage hypp\u00e4si 100% ja l\u00e4pp\u00e4ri melkein leipo kiinni. Oletan, ett\u00e4 onnistuin packet stormin luomisessa. Tallensin muutaman screenshotin:","title":"Nuking this network with no survivors"},{"location":"E07/#stp-aktivointi","text":"Aloitan STP konfiguroinnin, jotta minun l\u00e4pp\u00e4rin ei tarvitse k\u00e4rsi\u00e4 moisesta en\u00e4\u00e4. STP lis\u00e4t\u00e4\u00e4n VLAN:eihin komennolla configure stpd s0 add vlan <name> ports all . Lis\u00e4\u00e4n STP:n kaikkille kytkimille ja kaikille VLAN:eille. T\u00e4m\u00e4n j\u00e4lkeen komento enable stpd s0 kytkee STP:n p\u00e4\u00e4lle. Tarkastellaan CPU:n kuormaa kun aloitan ty\u00f6asemien v\u00e4lisen kommunikoinnin: L\u00e4pp\u00e4ri nyt tykk\u00e4\u00e4. Kaikki n\u00e4ytt\u00e4\u00e4 toimivan ongelmitta.","title":"STP aktivointi"},{"location":"E07/#stp-konfigurointi","text":"Aloitan kytkinten porttien tarkastelun. Komennolla show stpd s0 ja show stpd s0 ports n\u00e4en kytkinten STP konfiguraatiot ja porttien tilat. T\u00e4st\u00e4 voin piirt\u00e4\u00e4 nykyisen STP topologian: Kuten t\u00e4st\u00e4 n\u00e4kee, Switch2 on sattumoisin root switch. T\u00e4m\u00e4 on hyv\u00e4, sill\u00e4 Switch2 on l\u00e4hin kytkin vyos reitittimeen. Porttien tilat ovat my\u00f6s hyv\u00e4t, joten n\u00e4it\u00e4 ei tarvitse muuttaa. Vaikka Switch2 on valittu root bridgeksi, aion silti vaihtaa sen prioriteetin pienimm\u00e4ksi sen oletusarvosta. Teen t\u00e4m\u00e4n komennolla configure stpd s0 priority 4096 .","title":"STP konfigurointi"},{"location":"E07/#stp-testausta","text":"Aloitan testauksen menem\u00e4ll\u00e4 ty\u00f6asemille ja pingitt\u00e4m\u00e4ll\u00e4 toisiaan. Kaiken teorian mukaan jos katkaisen yhteyden Switch1 ja Switch2 v\u00e4lilt\u00e4, niin reitti Switch1 ja Switch3 v\u00e4lill\u00e4 alkaisi rullaamaan. Voin testata t\u00e4t\u00e4 menem\u00e4ll\u00e4 Switch2:Selle ja k\u00e4ytt\u00e4m\u00e4ll\u00e4 komentoa disable ports 1 . Katsotaan, mit\u00e4 tapahtuu. N\u00e4en, ett\u00e4 ICMP paketit 441-450 Lubuntu1 puolelta katosivat portin sulkemisen j\u00e4lkeen. Samanlainen tilanne Lubuntu2 puolella. Pingit lopulta alkoivat rullaamaan portin disabloimisen j\u00e4lkeen. Erinomaista! Topologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4 portin sulkemisen j\u00e4lkeen:","title":"STP testausta"},{"location":"E08/","text":"OSPF Aloitan kloonaamalla uuden vyos -kytkimen ja lis\u00e4\u00e4m\u00e4ll\u00e4 sen topologiaan teht\u00e4v\u00e4nannon mukaisesti: T\u00e4m\u00e4n j\u00e4lkeen konfiguroin Vyos -reitittimet jonka j\u00e4lkeen testaan toimivuutta pingill\u00e4: Toimii ongelmitta. T\u00e4m\u00e4n j\u00e4lkeen tarvitsen jokaiselle reitittimelle loopback osoitteen. Teen t\u00e4m\u00e4n jakamalla aliverkon 10.3.31.140/30 kolmeen osaan (Esim.: 10.3.31.140/32 ) ja jakamalla kyseiset IP-osoitteet kytkimille komennolla: set interfaces loopback lo address <x.x.x.x/32> T\u00e4m\u00e4n j\u00e4lkeen verkon topologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4: OSPF asentaminen On aika asentaa OSPF dynaaminen reititys verkkoon. Ensin poistan edelliset staattiset reititykset kummaltakin reitittimelt\u00e4 komennolla delete protocols static route <x.x.x.x/xx> . OSPF asennus toimii komennolla set protocols ospf area 0 network <x.x.x.x/xx> jossa IP-osoite on verkon osoite. Esimerkiksi Vyos1 tulee komento: set protocols ospf area 0 network <10.3.31.128/30> . T\u00e4m\u00e4 komento tehd\u00e4\u00e4n jokaisen reitittimen rajapintaan johon OSPF protokolla tulee. T\u00e4ss\u00e4 on lista erilaisista OSPF komennoista ja niiden selitteit\u00e4: Komento Selite set protocols ospf area 0 network Asentaa OSPF protokollan rajapintaan. IP-osoite on verkon osoite. set protocols ospf parameters router-id Asentaa Router-ID manuaalisesti. IP-osoite on loopback osoite. show ip ospf neighbor N\u00e4ytt\u00e4\u00e4 OSPF mukaisen naapuruston. Hyv\u00e4 vian selvitt\u00e4miseen show ip route ospf N\u00e4ytt\u00e4\u00e4 vakiintuneet reitit reititystaulukossa. Filtter\u00f6i esiin OSPF show ip ospf N\u00e4ytt\u00e4\u00e4 OSPF asetukset laitteessa. show ip ospf interface N\u00e4ytt\u00e4\u00e4 rajapintojen OSPF asetukset ja ominaisuudet. OSPF:n asennuksen j\u00e4lkeen tarkistan, ett\u00e4 kaikki toimii ongelmitta. Tarkistan konfigurointia edellisill\u00e4 komennoilla: Kaikki n\u00e4ytt\u00e4\u00e4 hyv\u00e4lt\u00e4 toistaiseksi, mutta mik\u00e4\u00e4n ei p\u00e4ihit\u00e4 pingi\u00e4 ja traceroutea. Pingaan ja tracerouttaan Lubuntu2:selta Lubuntu3:selle ja toisinp\u00e4in. Katsotaan jos pingi kulkee... Pingi rullaa ja traceroute on j\u00e4rkev\u00e4n n\u00e4k\u00f6inen. Erinomaista! Traceroutesta n\u00e4kee, ett\u00e4 tietoliikenne mene Vyos1 ja Vyos2 v\u00e4lilt\u00e4. T\u00e4st\u00e4 voi piirt\u00e4\u00e4 kartan jossa sininen viiva on reitti josta liikenne kulkee. HUOM! Oikeasti liikenne kulkisi Switch3 ja Switch2 kautta Vyos1:seen ja siit\u00e4 eteenp\u00e4in, mutta t\u00e4m\u00e4 kuva on katsottuna Layer 3 -tasolta.","title":"OSPF"},{"location":"E08/#ospf","text":"Aloitan kloonaamalla uuden vyos -kytkimen ja lis\u00e4\u00e4m\u00e4ll\u00e4 sen topologiaan teht\u00e4v\u00e4nannon mukaisesti: T\u00e4m\u00e4n j\u00e4lkeen konfiguroin Vyos -reitittimet jonka j\u00e4lkeen testaan toimivuutta pingill\u00e4: Toimii ongelmitta. T\u00e4m\u00e4n j\u00e4lkeen tarvitsen jokaiselle reitittimelle loopback osoitteen. Teen t\u00e4m\u00e4n jakamalla aliverkon 10.3.31.140/30 kolmeen osaan (Esim.: 10.3.31.140/32 ) ja jakamalla kyseiset IP-osoitteet kytkimille komennolla: set interfaces loopback lo address <x.x.x.x/32> T\u00e4m\u00e4n j\u00e4lkeen verkon topologia n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4:","title":"OSPF"},{"location":"E08/#ospf-asentaminen","text":"On aika asentaa OSPF dynaaminen reititys verkkoon. Ensin poistan edelliset staattiset reititykset kummaltakin reitittimelt\u00e4 komennolla delete protocols static route <x.x.x.x/xx> . OSPF asennus toimii komennolla set protocols ospf area 0 network <x.x.x.x/xx> jossa IP-osoite on verkon osoite. Esimerkiksi Vyos1 tulee komento: set protocols ospf area 0 network <10.3.31.128/30> . T\u00e4m\u00e4 komento tehd\u00e4\u00e4n jokaisen reitittimen rajapintaan johon OSPF protokolla tulee. T\u00e4ss\u00e4 on lista erilaisista OSPF komennoista ja niiden selitteit\u00e4: Komento Selite set protocols ospf area 0 network Asentaa OSPF protokollan rajapintaan. IP-osoite on verkon osoite. set protocols ospf parameters router-id Asentaa Router-ID manuaalisesti. IP-osoite on loopback osoite. show ip ospf neighbor N\u00e4ytt\u00e4\u00e4 OSPF mukaisen naapuruston. Hyv\u00e4 vian selvitt\u00e4miseen show ip route ospf N\u00e4ytt\u00e4\u00e4 vakiintuneet reitit reititystaulukossa. Filtter\u00f6i esiin OSPF show ip ospf N\u00e4ytt\u00e4\u00e4 OSPF asetukset laitteessa. show ip ospf interface N\u00e4ytt\u00e4\u00e4 rajapintojen OSPF asetukset ja ominaisuudet. OSPF:n asennuksen j\u00e4lkeen tarkistan, ett\u00e4 kaikki toimii ongelmitta. Tarkistan konfigurointia edellisill\u00e4 komennoilla: Kaikki n\u00e4ytt\u00e4\u00e4 hyv\u00e4lt\u00e4 toistaiseksi, mutta mik\u00e4\u00e4n ei p\u00e4ihit\u00e4 pingi\u00e4 ja traceroutea. Pingaan ja tracerouttaan Lubuntu2:selta Lubuntu3:selle ja toisinp\u00e4in. Katsotaan jos pingi kulkee... Pingi rullaa ja traceroute on j\u00e4rkev\u00e4n n\u00e4k\u00f6inen. Erinomaista! Traceroutesta n\u00e4kee, ett\u00e4 tietoliikenne mene Vyos1 ja Vyos2 v\u00e4lilt\u00e4. T\u00e4st\u00e4 voi piirt\u00e4\u00e4 kartan jossa sininen viiva on reitti josta liikenne kulkee. HUOM! Oikeasti liikenne kulkisi Switch3 ja Switch2 kautta Vyos1:seen ja siit\u00e4 eteenp\u00e4in, mutta t\u00e4m\u00e4 kuva on katsottuna Layer 3 -tasolta.","title":"OSPF asentaminen"},{"location":"E09/","text":"Palomuuraaminen Ensin kloonaan uuden ty\u00f6aseman ja asennan uuden adapterin Vyos3:seen. Uuden Lubuntun ja Vyos3 v\u00e4linen internal network tulee 'public' -nimell\u00e4. T\u00e4m\u00e4n verkon osoitteeksi tulee 192.168.89.192/26 ja oletusyhteysk\u00e4yt\u00e4v\u00e4 on 192.168.89.254 . Asennan DHCP palvelimen vyos3:selle ja konfiguroin sen, jotta ty\u00f6asemat saavat IP-osoitteet. T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4n t\u00e4m\u00e4n verkon dynaamiseen reititykseen komennolla set protocols ospf area 0 network <192.168.89.192/26> . T\u00e4m\u00e4n j\u00e4lkeen verkkoni n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4 fyysisen kytkenn\u00e4n n\u00e4kokulmasta: Ja TCP/IP tai layer 3 n\u00e4k\u00f6kulmasta: Suunitelma on luoda 3 palomuuri zonea: LAN , WAN ja Vyos . Palomuurien konfigurointi On hyv\u00e4 idea p\u00e4\u00e4st\u00e4\u00e4 kaikki pingit palomuureista l\u00e4pi testausta varten. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennolla set firewall all-ping <enable/disable> . Nyt aloitan palumuurien zone luonnin. Zonet luodaan komennolla set zone-policy zone <name> default-action <drop/accept> . T\u00e4m\u00e4n j\u00e4lkeen pit\u00e4\u00e4 p\u00e4\u00e4tt\u00e4\u00e4 mihin interfaceen kyseiset zonet kuuluvat. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennolla set zone-policy zone <name> interface <interface> . T\u00e4ss\u00e4 tapauksessa WAN zone tulee interface eth2, LAN zone tulee eth1 ja eth0. Vyos zone on local-zone. On aika konfiguroida LAN -> WAN palomuuri s\u00e4\u00e4nn\u00f6t. N\u00e4m\u00e4 ovat: set firewall name LAN_to_WAN default-action drop set firewall name LAN_to_WAN enable-default-log set firewall name LAN_to_WAN rule 10 action accept set firewall name LAN_to_WAN rule 10 destination port 80 set firewall name LAN_to_WAN rule 10 protocol tcp set firewall name LAN_to_WAN rule 10 log enable set firewall name LAN_to_WAN rule 11 action accept set firewall name LAN_to_WAN rule 11 destination port 443 set firewall name LAN_to_WAN rule 11 protocol tcp set firewall name LAN_to_WAN rule 11 log enable set firewall name LAN_to_WAN rule 20 action accept set firewall name LAN_to_WAN rule 20 protocol icmp set firewall name LAN_to_WAN rule 20 log enable set firewall name LAN_to_WAN rule 30 action accept set firewall name LAN_to_WAN rule 30 destination port 22 set firewall name LAN_to_WAN rule 30 protocol tcp set firewall name LAN_to_WAN rule 30 log enable set firewall name LAN_to_WAN rule 40 action accept set firewall name LAN_to_WAN rule 40 destination port 53 set firewall name LAN_to_WAN rule 40 protocol udp set firewall name LAN_to_WAN rule 40 log enable T\u00e4m\u00e4n j\u00e4lkeen luon WAN -> LAN s\u00e4\u00e4nn\u00f6t. Haluan, ett\u00e4 palomuuri p\u00e4\u00e4st\u00e4\u00e4 kaikki olemassa olevat yhteydet takaisin LAN:iin. T\u00e4m\u00e4 tehd\u00e4\u00e4n stateful asetuksella: set firewall name WAN_to_LAN default-action drop set firewall name WAN_to_LAN rule 10 action accept set firewall name WAN_to_LAN rule 10 state established enable set firewall name WAN_to_LAN rule 10 state related enable Tarvitsen s\u00e4\u00e4nn\u00f6t LAN -> Vyos yhteyksille. N\u00e4m\u00e4 ovat SSH yhteyksi\u00e4 joten hyv\u00e4ksyn ne. T\u00e4m\u00e4n lis\u00e4ksi dynaaminen reititysprotokolla OSPF tarvitsee hyv\u00e4ksymisen. S\u00e4\u00e4nn\u00f6t n\u00e4ille ovat: set firewall name LAN_to_vyos default-action drop set firewall name LAN_to_vyos rule 10 action accept set firewall name LAN_to_vyos rule 10 destination port 22 set firewall name LAN_to_vyos rule 10 protocol tcp set firewall name LAN_to_vyos rule 20 action accept set firewall name LAN_to_vyos rule 20 protocol ospf Edellisen lis\u00e4ksi tarvitsen yhteyden Vyos -> LAN. SSH ja OSPF pit\u00e4\u00e4 otta huomioon my\u00f6s. S\u00e4\u00e4nn\u00f6t t\u00e4h\u00e4n ovat: set firewall name vyos_to_LAN default-action drop set firewall name vyos_to_LAN rule 10 action accept set firewall name vyos_to_LAN rule 10 state established enable set firewall name vyos_to_LAN rule 10 state related enable set firewall name vyos_to_LAN rule 20 action accept set firewall name vyos_to_LAN rule 20 protocol ospf Viimeisen\u00e4 on mahdollisuus laittaa Vyos -> WAN ja toisinp\u00e4in, mutta koska t\u00e4ll\u00e4 simuloidaan \u00ednternetti\u00e4, en halua ulkopuolisten p\u00e4\u00e4sev\u00e4n k\u00e4siksi Vyossiin. T\u00e4st\u00e4 syyst\u00e4 en anna WAN:ista tulevien yhteyksien p\u00e4\u00e4sev\u00e4n Vyossiin k\u00e4siksi. Palomuuris\u00e4\u00e4nt\u00f6jen bindaus zoneihin Palomuuris\u00e4\u00e4nt\u00f6jen bindaus zoneihin joita olen tehnyt tehd\u00e4\u00e4n komennolla set zone-policy zone <destination-zone> from <source-zone> firewall name <source_to_destination> T\u00e4ss\u00e4 tapauksessa n\u00e4m\u00e4 komennot ovat: set zone-policy zone LAN from WAN firewall name WAN_to_LAN set zone-policy zone WAN from LAN firewall name LAN_to_WAN set zone-policy zone vyos from LAN firewall name LAN_to_vyos set zone-policy zone LAN from vyos firewall name vyos_to_LAN Nyt palomuurien zonet ja niiden s\u00e4\u00e4nn\u00f6t ovat tehty. Aika testata ne! Palomuurin testaus Testaan HTTP:n toimivuutta LAN -> WAN suunnassa. Lubuntu2 ottaa HTTP yhteyden Lubuntu4 HTTP palvelimeen. T\u00e4m\u00e4 pit\u00e4isi l\u00e4p\u00e4ist\u00e4 palomuurin LAN -> WAN s\u00e4\u00e4nt\u00f6jen mukaan. Katsotaan miten k\u00e4y. HTTP LAN -> WAN n\u00e4ytt\u00e4\u00e4 toimivan! HTTP yhteyksien lis\u00e4ksi ping/ICMP pit\u00e4isi toimia samalla tavalla. Kokeillaan... Ping rullaa my\u00f6s. Varmistan t\u00e4m\u00e4n traceroutella. Katsotaan tracerouten tulos... Traceroute ei toimi. T\u00e4m\u00e4 johtuu siit\u00e4, ett\u00e4 traceroute toimii oletuksena UDP protokollan kautta. T\u00e4m\u00e4 ei ole sallittu palomuuris\u00e4\u00e4nn\u00f6iss\u00e4. lis\u00e4\u00e4m\u00e4ll\u00e4 vipun --icmp traceroute toimii ICMP protokollalla. Kokeillaan uudestaan... Traceroute toimii taas! T\u00e4m\u00e4 varmistaa, ett\u00e4 UDP ei l\u00e4p\u00e4ise LAN -> WAN suunnassa palomuuria. Erinomaista! Nmap on tietoverkkojen skannaus -ja testaus ohjelma. K\u00e4yt\u00e4n sit\u00e4 minun palomuurin testauksessa. Nmap tuloksesta n\u00e4en, ett\u00e4 SSH ja HTTPS on 'closed', eli palomuuri est\u00e4\u00e4 niiden toimimisen LAN -> WAN suuntaan. HTTP protokolla toimii silti portissa 80. T\u00e4m\u00e4 k\u00e4y j\u00e4rkeen, sill\u00e4 n\u00e4m\u00e4 ovat ne s\u00e4\u00e4nn\u00f6t joita asetin palomuuriini. T\u00e4m\u00e4 varmentaa, ett\u00e4 palomuurini toimii ongelmitta! T\u00e4ss\u00e4 on hyv\u00e4ksyttyj\u00e4 tcp/80 paketteja jotka ovat HTTP paketteja. N\u00e4m\u00e4 ovat hyv\u00e4ksytty palomuurissa joten ne l\u00e4p\u00e4isiv\u00e4t palomuurin: Viimeisen\u00e4 on default dropped paketit. Kuvasta n\u00e4kee, ett\u00e4 n\u00e4it\u00e4 on useita: .cfg tiedostot Vyos3 .cfg file","title":"Palomuuraaminen"},{"location":"E09/#palomuuraaminen","text":"Ensin kloonaan uuden ty\u00f6aseman ja asennan uuden adapterin Vyos3:seen. Uuden Lubuntun ja Vyos3 v\u00e4linen internal network tulee 'public' -nimell\u00e4. T\u00e4m\u00e4n verkon osoitteeksi tulee 192.168.89.192/26 ja oletusyhteysk\u00e4yt\u00e4v\u00e4 on 192.168.89.254 . Asennan DHCP palvelimen vyos3:selle ja konfiguroin sen, jotta ty\u00f6asemat saavat IP-osoitteet. T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4n t\u00e4m\u00e4n verkon dynaamiseen reititykseen komennolla set protocols ospf area 0 network <192.168.89.192/26> . T\u00e4m\u00e4n j\u00e4lkeen verkkoni n\u00e4ytt\u00e4\u00e4 t\u00e4lt\u00e4 fyysisen kytkenn\u00e4n n\u00e4kokulmasta: Ja TCP/IP tai layer 3 n\u00e4k\u00f6kulmasta: Suunitelma on luoda 3 palomuuri zonea: LAN , WAN ja Vyos .","title":"Palomuuraaminen"},{"location":"E09/#palomuurien-konfigurointi","text":"On hyv\u00e4 idea p\u00e4\u00e4st\u00e4\u00e4 kaikki pingit palomuureista l\u00e4pi testausta varten. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennolla set firewall all-ping <enable/disable> . Nyt aloitan palumuurien zone luonnin. Zonet luodaan komennolla set zone-policy zone <name> default-action <drop/accept> . T\u00e4m\u00e4n j\u00e4lkeen pit\u00e4\u00e4 p\u00e4\u00e4tt\u00e4\u00e4 mihin interfaceen kyseiset zonet kuuluvat. T\u00e4m\u00e4 tehd\u00e4\u00e4n komennolla set zone-policy zone <name> interface <interface> . T\u00e4ss\u00e4 tapauksessa WAN zone tulee interface eth2, LAN zone tulee eth1 ja eth0. Vyos zone on local-zone. On aika konfiguroida LAN -> WAN palomuuri s\u00e4\u00e4nn\u00f6t. N\u00e4m\u00e4 ovat: set firewall name LAN_to_WAN default-action drop set firewall name LAN_to_WAN enable-default-log set firewall name LAN_to_WAN rule 10 action accept set firewall name LAN_to_WAN rule 10 destination port 80 set firewall name LAN_to_WAN rule 10 protocol tcp set firewall name LAN_to_WAN rule 10 log enable set firewall name LAN_to_WAN rule 11 action accept set firewall name LAN_to_WAN rule 11 destination port 443 set firewall name LAN_to_WAN rule 11 protocol tcp set firewall name LAN_to_WAN rule 11 log enable set firewall name LAN_to_WAN rule 20 action accept set firewall name LAN_to_WAN rule 20 protocol icmp set firewall name LAN_to_WAN rule 20 log enable set firewall name LAN_to_WAN rule 30 action accept set firewall name LAN_to_WAN rule 30 destination port 22 set firewall name LAN_to_WAN rule 30 protocol tcp set firewall name LAN_to_WAN rule 30 log enable set firewall name LAN_to_WAN rule 40 action accept set firewall name LAN_to_WAN rule 40 destination port 53 set firewall name LAN_to_WAN rule 40 protocol udp set firewall name LAN_to_WAN rule 40 log enable T\u00e4m\u00e4n j\u00e4lkeen luon WAN -> LAN s\u00e4\u00e4nn\u00f6t. Haluan, ett\u00e4 palomuuri p\u00e4\u00e4st\u00e4\u00e4 kaikki olemassa olevat yhteydet takaisin LAN:iin. T\u00e4m\u00e4 tehd\u00e4\u00e4n stateful asetuksella: set firewall name WAN_to_LAN default-action drop set firewall name WAN_to_LAN rule 10 action accept set firewall name WAN_to_LAN rule 10 state established enable set firewall name WAN_to_LAN rule 10 state related enable Tarvitsen s\u00e4\u00e4nn\u00f6t LAN -> Vyos yhteyksille. N\u00e4m\u00e4 ovat SSH yhteyksi\u00e4 joten hyv\u00e4ksyn ne. T\u00e4m\u00e4n lis\u00e4ksi dynaaminen reititysprotokolla OSPF tarvitsee hyv\u00e4ksymisen. S\u00e4\u00e4nn\u00f6t n\u00e4ille ovat: set firewall name LAN_to_vyos default-action drop set firewall name LAN_to_vyos rule 10 action accept set firewall name LAN_to_vyos rule 10 destination port 22 set firewall name LAN_to_vyos rule 10 protocol tcp set firewall name LAN_to_vyos rule 20 action accept set firewall name LAN_to_vyos rule 20 protocol ospf Edellisen lis\u00e4ksi tarvitsen yhteyden Vyos -> LAN. SSH ja OSPF pit\u00e4\u00e4 otta huomioon my\u00f6s. S\u00e4\u00e4nn\u00f6t t\u00e4h\u00e4n ovat: set firewall name vyos_to_LAN default-action drop set firewall name vyos_to_LAN rule 10 action accept set firewall name vyos_to_LAN rule 10 state established enable set firewall name vyos_to_LAN rule 10 state related enable set firewall name vyos_to_LAN rule 20 action accept set firewall name vyos_to_LAN rule 20 protocol ospf Viimeisen\u00e4 on mahdollisuus laittaa Vyos -> WAN ja toisinp\u00e4in, mutta koska t\u00e4ll\u00e4 simuloidaan \u00ednternetti\u00e4, en halua ulkopuolisten p\u00e4\u00e4sev\u00e4n k\u00e4siksi Vyossiin. T\u00e4st\u00e4 syyst\u00e4 en anna WAN:ista tulevien yhteyksien p\u00e4\u00e4sev\u00e4n Vyossiin k\u00e4siksi.","title":"Palomuurien konfigurointi"},{"location":"E09/#palomuurisaantojen-bindaus-zoneihin","text":"Palomuuris\u00e4\u00e4nt\u00f6jen bindaus zoneihin joita olen tehnyt tehd\u00e4\u00e4n komennolla set zone-policy zone <destination-zone> from <source-zone> firewall name <source_to_destination> T\u00e4ss\u00e4 tapauksessa n\u00e4m\u00e4 komennot ovat: set zone-policy zone LAN from WAN firewall name WAN_to_LAN set zone-policy zone WAN from LAN firewall name LAN_to_WAN set zone-policy zone vyos from LAN firewall name LAN_to_vyos set zone-policy zone LAN from vyos firewall name vyos_to_LAN Nyt palomuurien zonet ja niiden s\u00e4\u00e4nn\u00f6t ovat tehty. Aika testata ne!","title":"Palomuuris\u00e4\u00e4nt\u00f6jen bindaus zoneihin"},{"location":"E09/#palomuurin-testaus","text":"Testaan HTTP:n toimivuutta LAN -> WAN suunnassa. Lubuntu2 ottaa HTTP yhteyden Lubuntu4 HTTP palvelimeen. T\u00e4m\u00e4 pit\u00e4isi l\u00e4p\u00e4ist\u00e4 palomuurin LAN -> WAN s\u00e4\u00e4nt\u00f6jen mukaan. Katsotaan miten k\u00e4y. HTTP LAN -> WAN n\u00e4ytt\u00e4\u00e4 toimivan! HTTP yhteyksien lis\u00e4ksi ping/ICMP pit\u00e4isi toimia samalla tavalla. Kokeillaan... Ping rullaa my\u00f6s. Varmistan t\u00e4m\u00e4n traceroutella. Katsotaan tracerouten tulos... Traceroute ei toimi. T\u00e4m\u00e4 johtuu siit\u00e4, ett\u00e4 traceroute toimii oletuksena UDP protokollan kautta. T\u00e4m\u00e4 ei ole sallittu palomuuris\u00e4\u00e4nn\u00f6iss\u00e4. lis\u00e4\u00e4m\u00e4ll\u00e4 vipun --icmp traceroute toimii ICMP protokollalla. Kokeillaan uudestaan... Traceroute toimii taas! T\u00e4m\u00e4 varmistaa, ett\u00e4 UDP ei l\u00e4p\u00e4ise LAN -> WAN suunnassa palomuuria. Erinomaista! Nmap on tietoverkkojen skannaus -ja testaus ohjelma. K\u00e4yt\u00e4n sit\u00e4 minun palomuurin testauksessa. Nmap tuloksesta n\u00e4en, ett\u00e4 SSH ja HTTPS on 'closed', eli palomuuri est\u00e4\u00e4 niiden toimimisen LAN -> WAN suuntaan. HTTP protokolla toimii silti portissa 80. T\u00e4m\u00e4 k\u00e4y j\u00e4rkeen, sill\u00e4 n\u00e4m\u00e4 ovat ne s\u00e4\u00e4nn\u00f6t joita asetin palomuuriini. T\u00e4m\u00e4 varmentaa, ett\u00e4 palomuurini toimii ongelmitta! T\u00e4ss\u00e4 on hyv\u00e4ksyttyj\u00e4 tcp/80 paketteja jotka ovat HTTP paketteja. N\u00e4m\u00e4 ovat hyv\u00e4ksytty palomuurissa joten ne l\u00e4p\u00e4isiv\u00e4t palomuurin: Viimeisen\u00e4 on default dropped paketit. Kuvasta n\u00e4kee, ett\u00e4 n\u00e4it\u00e4 on useita:","title":"Palomuurin testaus"},{"location":"E09/#cfg-tiedostot","text":"Vyos3 .cfg file","title":".cfg tiedostot"},{"location":"E10/","text":"NAT Ensin kloonaan uuden ty\u00f6aseman ja asennan uuden adapterin Vyos3:seen. Uuden Lubuntun ja Vyos3 v\u00e4linen internal network tulee 'public' -nimell\u00e4. T\u00e4m\u00e4n verkon osoitteeksi tulee 192.168.89.192/26 ja oletusyhteysk\u00e4yt\u00e4v\u00e4 on 192.168.89.254 . Asennan DHCP palvelimen vyos3:selle ja konfiguroin sen, jotta verkossa olevat laitteet saavat IP-osoitteet. T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4n t\u00e4m\u00e4n verkon dynaamiseen reititykseen komennolla set protocols ospf area 0 network <192.168.89.192/26> . Testaan verkon toimivuutta pingill\u00e4 ja traceroutella: Kaikki n\u00e4ytt\u00e4\u00e4 toimivan oikein! Many-to-1 NAT asennus Tarvitsen kaikki privaatti IPv4 osoitteet ennen kuin aloitan NATin asennuksen. Jokainen aliverkko jota verkossani on, tulee NAT:ittaa. Asennan NATin Vyos3:selle komennolla set nat source rule 10 outbound-interface eth2 . eth2 osoittaa 'public' -verkkoa p\u00e4in. T\u00e4m\u00e4n j\u00e4lkeen k\u00e4yt\u00e4n komentoa set nat source rule 10 translation address masquerade joka maskeeraa tulevat IP-osoitteet NAT:in mukaisesti. Kaikki aliverkot tullaan NAT:ittamaan, paitsi network_devices , koska n\u00e4ill\u00e4 ei ole asiaa julkiseen verkkoon. T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4n IP-osoitteet, jotka maskeerataan. N\u00e4m\u00e4 IP-osoitteet ovat: Aliverkko 192.168.89.0/26 192.168.89.64/26 192.168.89.128/26 10.3.31.128/30 10.3.31.132/30 10.3.31.136/30 Komennolla set nat source rule 10 source address <xx.xx.xx.xx/xx> lis\u00e4\u00e4n IP-osoitteet NAT:attavaksi. source viittaa t\u00e4ss\u00e4 IPv4 otsikkoa jossa sen source -kentt\u00e4 muutetaan. NAT testaus Aloitan testauksen perus pingill\u00e4 ja traceroutella, jotta yhteys edes toimii. Yhteys toimii viel\u00e4kin. Tutkin Vyos3:sen s\u00e4\u00e4nt\u00f6j\u00e4 ja k\u00e4\u00e4nn\u00f6ksi\u00e4, jotta IP-osoitteet on NAT:attu oikein. N\u00e4ytt\u00e4\u00e4 silt\u00e4, ett\u00e4 IP-osoitteet on NAT:itettu, mutta aion viel\u00e4 testata t\u00e4t\u00e4 Wiresharkilla. Laitan Wiresharkin kuuntelemaan Vyos3:sen inbound ja outbound rajapintaan ja katson, mit\u00e4 l\u00f6yd\u00e4n. Kuten wiresharkista n\u00e4kee, sis\u00e4\u00e4n tulee muutama eri IP-osoitetta public -verkkoa p\u00e4in. Outbound kuvasta n\u00e4en, ett\u00e4 n\u00e4m\u00e4 IP-osoitteet on NAT:attu osoitteeseen 192.168.89.254 kuten pit\u00e4\u00e4kin. Kaikki toimii ongelmitta! NAT konfigure dumppi vyos@vyos3# show nat source rule rule 10 { outbound-interface eth2 source { address 192.168.89.0/26 } translation { address masquerade } } rule 11 { outbound-interface eth2 source { address 192.168.89.64/26 } translation { address masquerade } } rule 12 { outbound-interface eth2 source { address 192.168.89.128/26 } translation { address masquerade } } rule 13 { outbound-interface eth2 source { address 10.3.31.128/30 } translation { address masquerade } } rule 14 { outbound-interface eth2 source { address 10.3.31.132/30 } translation { address masquerade } } rule 15 { outbound-interface eth2 source { address 10.3.31.136/30 } translation { address masquerade } }","title":"NAT"},{"location":"E10/#nat","text":"Ensin kloonaan uuden ty\u00f6aseman ja asennan uuden adapterin Vyos3:seen. Uuden Lubuntun ja Vyos3 v\u00e4linen internal network tulee 'public' -nimell\u00e4. T\u00e4m\u00e4n verkon osoitteeksi tulee 192.168.89.192/26 ja oletusyhteysk\u00e4yt\u00e4v\u00e4 on 192.168.89.254 . Asennan DHCP palvelimen vyos3:selle ja konfiguroin sen, jotta verkossa olevat laitteet saavat IP-osoitteet. T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4n t\u00e4m\u00e4n verkon dynaamiseen reititykseen komennolla set protocols ospf area 0 network <192.168.89.192/26> . Testaan verkon toimivuutta pingill\u00e4 ja traceroutella: Kaikki n\u00e4ytt\u00e4\u00e4 toimivan oikein!","title":"NAT"},{"location":"E10/#many-to-1-nat-asennus","text":"Tarvitsen kaikki privaatti IPv4 osoitteet ennen kuin aloitan NATin asennuksen. Jokainen aliverkko jota verkossani on, tulee NAT:ittaa. Asennan NATin Vyos3:selle komennolla set nat source rule 10 outbound-interface eth2 . eth2 osoittaa 'public' -verkkoa p\u00e4in. T\u00e4m\u00e4n j\u00e4lkeen k\u00e4yt\u00e4n komentoa set nat source rule 10 translation address masquerade joka maskeeraa tulevat IP-osoitteet NAT:in mukaisesti. Kaikki aliverkot tullaan NAT:ittamaan, paitsi network_devices , koska n\u00e4ill\u00e4 ei ole asiaa julkiseen verkkoon. T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4n IP-osoitteet, jotka maskeerataan. N\u00e4m\u00e4 IP-osoitteet ovat: Aliverkko 192.168.89.0/26 192.168.89.64/26 192.168.89.128/26 10.3.31.128/30 10.3.31.132/30 10.3.31.136/30 Komennolla set nat source rule 10 source address <xx.xx.xx.xx/xx> lis\u00e4\u00e4n IP-osoitteet NAT:attavaksi. source viittaa t\u00e4ss\u00e4 IPv4 otsikkoa jossa sen source -kentt\u00e4 muutetaan.","title":"Many-to-1 NAT asennus"},{"location":"E10/#nat-testaus","text":"Aloitan testauksen perus pingill\u00e4 ja traceroutella, jotta yhteys edes toimii. Yhteys toimii viel\u00e4kin. Tutkin Vyos3:sen s\u00e4\u00e4nt\u00f6j\u00e4 ja k\u00e4\u00e4nn\u00f6ksi\u00e4, jotta IP-osoitteet on NAT:attu oikein. N\u00e4ytt\u00e4\u00e4 silt\u00e4, ett\u00e4 IP-osoitteet on NAT:itettu, mutta aion viel\u00e4 testata t\u00e4t\u00e4 Wiresharkilla. Laitan Wiresharkin kuuntelemaan Vyos3:sen inbound ja outbound rajapintaan ja katson, mit\u00e4 l\u00f6yd\u00e4n. Kuten wiresharkista n\u00e4kee, sis\u00e4\u00e4n tulee muutama eri IP-osoitetta public -verkkoa p\u00e4in. Outbound kuvasta n\u00e4en, ett\u00e4 n\u00e4m\u00e4 IP-osoitteet on NAT:attu osoitteeseen 192.168.89.254 kuten pit\u00e4\u00e4kin. Kaikki toimii ongelmitta!","title":"NAT testaus"},{"location":"E10/#nat-konfigure-dumppi","text":"vyos@vyos3# show nat source rule rule 10 { outbound-interface eth2 source { address 192.168.89.0/26 } translation { address masquerade } } rule 11 { outbound-interface eth2 source { address 192.168.89.64/26 } translation { address masquerade } } rule 12 { outbound-interface eth2 source { address 192.168.89.128/26 } translation { address masquerade } } rule 13 { outbound-interface eth2 source { address 10.3.31.128/30 } translation { address masquerade } } rule 14 { outbound-interface eth2 source { address 10.3.31.132/30 } translation { address masquerade } } rule 15 { outbound-interface eth2 source { address 10.3.31.136/30 } translation { address masquerade } }","title":"NAT konfigure dumppi"},{"location":"E11/","text":"TCP ja UDP Aloitan muuttamalla Lubuntu1 verkkoadapterin asetuksia vaihtamalla se bridged network -tilaan. Boottaan Lubuntu1 ja aloitan testin sy\u00f6tt\u00e4m\u00e4ll\u00e4 komennon iperf -c iperf.he.net Kuvasta n\u00e4kee, ett\u00e4 komennolla luodaan TCP yhteys palvelimeen k\u00e4ytt\u00e4en porttia 5001 . Huomioitavaa on, ett\u00e4 min\u00e4 k\u00e4yt\u00e4n t\u00e4ss\u00e4 tapauksessa porttia 49700 . TCP window size kertoo kuinka suurta ikkunaa k\u00e4ytet\u00e4\u00e4n. T\u00e4ss\u00e4 tapauksessa 85 kilotavun ikkunoita. N\u00e4en my\u00f6s kuvasta kuinka paljon dataa on siirretty yhteens\u00e4 ja kaistanleveyden. T\u00e4m\u00e4 voi olla t\u00e4rke\u00e4\u00e4 tietoa tietoverkkojen testauksessa. On mahdollista k\u00e4ytt\u00e4\u00e4 -t -parametria jolla voidaan muuttaa testauksen aikaa. -i parametrilla voidaan raportoida tuloksia eri v\u00e4lein. Kokeilen l\u00e4hett\u00e4\u00e4 dataa 15 sekunnin ajaksi ja mittaan tuloksia joka sekuntti komennolla iperf -c iperf.he.net -t 15 -i 1 . Kuvasta n\u00e4en, ett\u00e4 kaista muuttuu kokoajan. T\u00e4m\u00e4 johtuu siit\u00e4, ett\u00e4 kulkevassa yhteydess\u00e4 ikkunoiden koko muuttuu kokoajan. TCP k\u00e4ytt\u00e4\u00e4 mahdollisimman paljon kaistanleveytt\u00e4 ja osapuolet neuvottelevat kokoajan ikkunan koosta. T\u00e4m\u00e4 aiheuttaa kuvassa n\u00e4kyv\u00e4n vaihtelun. Nyt testaan samaa komentoa, mutta lis\u00e4\u00e4n parametrin -u joka vaihtaa protokollan UDP:ksi. UDP ei k\u00e4yt\u00e4 niin paljon kaistaa kuten TCP joten katsotaan mik\u00e4 on tulos... Kaistanleveys pysyy l\u00e4hes samana kokoajan. UDP:ss\u00e4 ei suoriteta alkuk\u00e4ttely\u00e4, pakettien kuittausta eik\u00e4 yhteyden lopettamista. Kuten t\u00e4st\u00e4 n\u00e4kee, se ei silti ole nopeampi kuin TCP, koska TCP:n liukuva ikkuna kompensoi tehokkaasti kuittausten viem\u00e4\u00e4 aikaa. Verkon sis\u00e4inen testaus Boottaan tietoverkkoni ja p\u00e4\u00e4t\u00e4n, ett\u00e4 Lubuntu3 on Iperf palvelin. Teen t\u00e4m\u00e4n sy\u00f6tt\u00e4m\u00e4ll\u00e4 sille komennon iperf -s . K\u00e4yt\u00e4n Lubuntu2 clienttina jolla testaan tietoliikennett\u00e4. Kuvasta n\u00e4kee tarkemmin, mitk\u00e4 laitteet ovat mit\u00e4kin. HUOM Kuva on Layer 3 n\u00e4k\u00f6kulmasta. Aloitan testauksen sy\u00f6tt\u00e4m\u00e4ll\u00e4 komennon iperf -c 192.168.89.130 -i 1 jotta n\u00e4en tulokset joka sekuntti. Katsotaan mik\u00e4 on tulos... Kuvasta n\u00e4en, ett\u00e4 verkkoni kaistanleveys leijuu noin 1,8 Mbit/s alueella. TCP ikkunan neuvottelu isontaa kaistaa v\u00e4lill\u00e4 jopa 3Mbit/s hetkeksi. Huomattavaa on my\u00f6s, ett\u00e4 client k\u00e4ytt\u00e4\u00e4 porttia 40906 kommunikoidakseen. Nyt testaan samaa komentoa, mutta k\u00e4yt\u00e4n UDP protokollaa. Katsotaan miten k\u00e4y... N\u00e4en, ett\u00e4 kaistanleveys on aika tasaisesti 1Mbit/s alueella. UDP:ss\u00e4 ei ole liukuvaa ikkunaa joten kaistanleveyden vaihtelevuutta ei normaalist\u00e4 n\u00e4hd\u00e4 toisin kuin TCP:ss\u00e4. TCP Wiresharkkailu Boottaan kolmannen Lubuntun joka toimii wiresharkkina. Kytken sen Lubuntu2 verkkoon odottamaan tulevia yhteyksi\u00e4. Lataan iperf -palvelimen koneelta index.html tiedoston komennolla wget 192.168.89.130 : T\u00e4m\u00e4 toimii TCP (ja HTTP) protokollalla, joten minun wiresharkin pit\u00e4isi pysty\u00e4 n\u00e4kem\u00e4\u00e4n TCP:n kolmisuuntaisen k\u00e4ttelyn. Katsotaan mit\u00e4 l\u00f6yd\u00e4n... Wiresharkista n\u00e4en, ett\u00e4 TCP k\u00e4ttely on tapahtunut. Ensiksi client ( 192.168.89.68 ) l\u00e4hett\u00e4\u00e4 palvelimelle ( 192.168.89.130 ) paketin SYN lipulla. T\u00e4ss\u00e4 palvelin vastaa clientille TCP k\u00e4ttelyn toisessa vaiheessa SYN ACK lipulla. T\u00e4m\u00e4 tarkoittaa, ett\u00e4 palvelin haluaa jatkaa TCP yhteyden luomista. TCP k\u00e4ttelyn viimeisess\u00e4 osassa client l\u00e4hett\u00e4\u00e4 paketin ACK lipulla palvelimelle. T\u00e4ll\u00e4 varmistetaan, ett\u00e4 client on saanut vastauksen palvelimelta ja nyt osapuolet ovat valmiita tiedonsiirtoon. UDP Wiresharkkailu Boottaan Lubuntu2 uudestaan ja kuuntelen wiresharkilla DHCP kommunikointia. Katsotaan, jos l\u00f6yd\u00e4n sen... Kuvasta n\u00e4en, ett\u00e4 DHCP k\u00e4ytt\u00e4\u00e4 UDP protokollaa ja palvelin k\u00e4ytt\u00e4\u00e4 porttia 67 joka on DHCP:n standardi portti. Huomattavaa on se, ett\u00e4 t\u00e4ss\u00e4 ei tapahtunut mink\u00e4\u00e4nlaista k\u00e4ttely\u00e4 tai verifikaatiota siit\u00e4, ett\u00e4 toinen osapuoli sai paketin perille. Client huhuili, ett\u00e4 onko t\u00e4\u00e4ll\u00e4 DHCP palvelinta jonka j\u00e4lkeen palvelin vastasi takaisin antamalla IP-osoitteen. T\u00e4llaista protokollaa kutsutaan \"yhteydett\u00f6m\u00e4ksi protokollaksi\" .","title":"TCP ja UDP"},{"location":"E11/#tcp-ja-udp","text":"Aloitan muuttamalla Lubuntu1 verkkoadapterin asetuksia vaihtamalla se bridged network -tilaan. Boottaan Lubuntu1 ja aloitan testin sy\u00f6tt\u00e4m\u00e4ll\u00e4 komennon iperf -c iperf.he.net Kuvasta n\u00e4kee, ett\u00e4 komennolla luodaan TCP yhteys palvelimeen k\u00e4ytt\u00e4en porttia 5001 . Huomioitavaa on, ett\u00e4 min\u00e4 k\u00e4yt\u00e4n t\u00e4ss\u00e4 tapauksessa porttia 49700 . TCP window size kertoo kuinka suurta ikkunaa k\u00e4ytet\u00e4\u00e4n. T\u00e4ss\u00e4 tapauksessa 85 kilotavun ikkunoita. N\u00e4en my\u00f6s kuvasta kuinka paljon dataa on siirretty yhteens\u00e4 ja kaistanleveyden. T\u00e4m\u00e4 voi olla t\u00e4rke\u00e4\u00e4 tietoa tietoverkkojen testauksessa. On mahdollista k\u00e4ytt\u00e4\u00e4 -t -parametria jolla voidaan muuttaa testauksen aikaa. -i parametrilla voidaan raportoida tuloksia eri v\u00e4lein. Kokeilen l\u00e4hett\u00e4\u00e4 dataa 15 sekunnin ajaksi ja mittaan tuloksia joka sekuntti komennolla iperf -c iperf.he.net -t 15 -i 1 . Kuvasta n\u00e4en, ett\u00e4 kaista muuttuu kokoajan. T\u00e4m\u00e4 johtuu siit\u00e4, ett\u00e4 kulkevassa yhteydess\u00e4 ikkunoiden koko muuttuu kokoajan. TCP k\u00e4ytt\u00e4\u00e4 mahdollisimman paljon kaistanleveytt\u00e4 ja osapuolet neuvottelevat kokoajan ikkunan koosta. T\u00e4m\u00e4 aiheuttaa kuvassa n\u00e4kyv\u00e4n vaihtelun. Nyt testaan samaa komentoa, mutta lis\u00e4\u00e4n parametrin -u joka vaihtaa protokollan UDP:ksi. UDP ei k\u00e4yt\u00e4 niin paljon kaistaa kuten TCP joten katsotaan mik\u00e4 on tulos... Kaistanleveys pysyy l\u00e4hes samana kokoajan. UDP:ss\u00e4 ei suoriteta alkuk\u00e4ttely\u00e4, pakettien kuittausta eik\u00e4 yhteyden lopettamista. Kuten t\u00e4st\u00e4 n\u00e4kee, se ei silti ole nopeampi kuin TCP, koska TCP:n liukuva ikkuna kompensoi tehokkaasti kuittausten viem\u00e4\u00e4 aikaa.","title":"TCP ja UDP"},{"location":"E11/#verkon-sisainen-testaus","text":"Boottaan tietoverkkoni ja p\u00e4\u00e4t\u00e4n, ett\u00e4 Lubuntu3 on Iperf palvelin. Teen t\u00e4m\u00e4n sy\u00f6tt\u00e4m\u00e4ll\u00e4 sille komennon iperf -s . K\u00e4yt\u00e4n Lubuntu2 clienttina jolla testaan tietoliikennett\u00e4. Kuvasta n\u00e4kee tarkemmin, mitk\u00e4 laitteet ovat mit\u00e4kin. HUOM Kuva on Layer 3 n\u00e4k\u00f6kulmasta. Aloitan testauksen sy\u00f6tt\u00e4m\u00e4ll\u00e4 komennon iperf -c 192.168.89.130 -i 1 jotta n\u00e4en tulokset joka sekuntti. Katsotaan mik\u00e4 on tulos... Kuvasta n\u00e4en, ett\u00e4 verkkoni kaistanleveys leijuu noin 1,8 Mbit/s alueella. TCP ikkunan neuvottelu isontaa kaistaa v\u00e4lill\u00e4 jopa 3Mbit/s hetkeksi. Huomattavaa on my\u00f6s, ett\u00e4 client k\u00e4ytt\u00e4\u00e4 porttia 40906 kommunikoidakseen. Nyt testaan samaa komentoa, mutta k\u00e4yt\u00e4n UDP protokollaa. Katsotaan miten k\u00e4y... N\u00e4en, ett\u00e4 kaistanleveys on aika tasaisesti 1Mbit/s alueella. UDP:ss\u00e4 ei ole liukuvaa ikkunaa joten kaistanleveyden vaihtelevuutta ei normaalist\u00e4 n\u00e4hd\u00e4 toisin kuin TCP:ss\u00e4.","title":"Verkon sis\u00e4inen testaus"},{"location":"E11/#tcp-wiresharkkailu","text":"Boottaan kolmannen Lubuntun joka toimii wiresharkkina. Kytken sen Lubuntu2 verkkoon odottamaan tulevia yhteyksi\u00e4. Lataan iperf -palvelimen koneelta index.html tiedoston komennolla wget 192.168.89.130 : T\u00e4m\u00e4 toimii TCP (ja HTTP) protokollalla, joten minun wiresharkin pit\u00e4isi pysty\u00e4 n\u00e4kem\u00e4\u00e4n TCP:n kolmisuuntaisen k\u00e4ttelyn. Katsotaan mit\u00e4 l\u00f6yd\u00e4n... Wiresharkista n\u00e4en, ett\u00e4 TCP k\u00e4ttely on tapahtunut. Ensiksi client ( 192.168.89.68 ) l\u00e4hett\u00e4\u00e4 palvelimelle ( 192.168.89.130 ) paketin SYN lipulla. T\u00e4ss\u00e4 palvelin vastaa clientille TCP k\u00e4ttelyn toisessa vaiheessa SYN ACK lipulla. T\u00e4m\u00e4 tarkoittaa, ett\u00e4 palvelin haluaa jatkaa TCP yhteyden luomista. TCP k\u00e4ttelyn viimeisess\u00e4 osassa client l\u00e4hett\u00e4\u00e4 paketin ACK lipulla palvelimelle. T\u00e4ll\u00e4 varmistetaan, ett\u00e4 client on saanut vastauksen palvelimelta ja nyt osapuolet ovat valmiita tiedonsiirtoon.","title":"TCP Wiresharkkailu"},{"location":"E11/#udp-wiresharkkailu","text":"Boottaan Lubuntu2 uudestaan ja kuuntelen wiresharkilla DHCP kommunikointia. Katsotaan, jos l\u00f6yd\u00e4n sen... Kuvasta n\u00e4en, ett\u00e4 DHCP k\u00e4ytt\u00e4\u00e4 UDP protokollaa ja palvelin k\u00e4ytt\u00e4\u00e4 porttia 67 joka on DHCP:n standardi portti. Huomattavaa on se, ett\u00e4 t\u00e4ss\u00e4 ei tapahtunut mink\u00e4\u00e4nlaista k\u00e4ttely\u00e4 tai verifikaatiota siit\u00e4, ett\u00e4 toinen osapuoli sai paketin perille. Client huhuili, ett\u00e4 onko t\u00e4\u00e4ll\u00e4 DHCP palvelinta jonka j\u00e4lkeen palvelin vastasi takaisin antamalla IP-osoitteen. T\u00e4llaista protokollaa kutsutaan \"yhteydett\u00f6m\u00e4ksi protokollaksi\" .","title":"UDP Wiresharkkailu"},{"location":"E12/","text":"Verkon hallinta Aloitan kytkem\u00e4ll\u00e4 SSH:n p\u00e4\u00e4lle jokaiseen verkkolaitteeseen. T\u00e4ll\u00e4 voin helposti tehd\u00e4 yhteyden Lubuntulta mille verkkolaitteelle vain. SSH:n lis\u00e4\u00e4minen kytkimille onnistuu komennolla enable ssh2 port 22 ja reitittimille komennolla set service ssh port 22 . T\u00e4st\u00e4 syntyy p\u00f6yt\u00e4 jossa on linkki kaikkien verkkolaitteiden konfiguraatiotiedostoon: Laite .cfg tiedosto Switch1 Switch1 linkki Switch2 Switch2 linkki Switch3 Switch3 linkki Vyos1 Vyos1 linkki Vyos2 Vyos2 linkki Vyos3 Vyos3 linkki Verkkolaitteiden web interface Otan web interfacen k\u00e4ytt\u00f6\u00f6n Switch1 ja Vyos1:seen. Kytkimiin saan web interfacen k\u00e4ytt\u00f6\u00f6n komennolla enable web http ja reitittimille komennolla set service https listen-address [IPv4 address on the Router - e.g. loopback] . T\u00e4m\u00e4n j\u00e4lkeen otan n\u00e4ihin palvelimiin yhteyden Lubuntu2:sesta, kirjaudun sis\u00e4\u00e4n ja katson mit\u00e4 l\u00f6yd\u00e4n. T\u00e4ss\u00e4 n\u00e4ytt\u00e4\u00e4 olevan kaikki mit\u00e4 olen itse k\u00e4ytt\u00e4nyt harkoissa ennen, mutta t\u00e4m\u00e4 web interface on hieman hidas joten en tulisi k\u00e4ytt\u00e4m\u00e4\u00e4n tulevaisuudessa. Poikkeuksena on Recent events ja Errors -osio, joka n\u00e4ytt\u00e4\u00e4 hyvin oleelliselta tietoverkkojen hallinnassa. En tied\u00e4 n\u00e4ille vastaavaa CLI komentoa mutta olen varma ett\u00e4 sellainen on olemassa. Toisaalta reitittimien web interface on hieman.... Puutteellinen. Pit\u00e4isk\u00f6 t\u00e4ss\u00e4 tehd\u00e4 oma web interface... Salasanan nuuskiminen Huomasin, ett\u00e4 minun wireshark lubuntu oli p\u00e4\u00e4ll\u00e4 edellisest\u00e4 harjoituksesta. P\u00e4\u00e4tin tarkistaa mit\u00e4 l\u00f6ysin sielt\u00e4 ja huomasin, ett\u00e4 minun kytkimen admin tunnus ja salasana oli nuuskittu :fearful: Ehk\u00e4 maailman helpoin tietoverkon pwnaus. Tarvitsee jonkinlaisen salauksen :D","title":"Verkon hallinta"},{"location":"E12/#verkon-hallinta","text":"Aloitan kytkem\u00e4ll\u00e4 SSH:n p\u00e4\u00e4lle jokaiseen verkkolaitteeseen. T\u00e4ll\u00e4 voin helposti tehd\u00e4 yhteyden Lubuntulta mille verkkolaitteelle vain. SSH:n lis\u00e4\u00e4minen kytkimille onnistuu komennolla enable ssh2 port 22 ja reitittimille komennolla set service ssh port 22 . T\u00e4st\u00e4 syntyy p\u00f6yt\u00e4 jossa on linkki kaikkien verkkolaitteiden konfiguraatiotiedostoon: Laite .cfg tiedosto Switch1 Switch1 linkki Switch2 Switch2 linkki Switch3 Switch3 linkki Vyos1 Vyos1 linkki Vyos2 Vyos2 linkki Vyos3 Vyos3 linkki","title":"Verkon hallinta"},{"location":"E12/#verkkolaitteiden-web-interface","text":"Otan web interfacen k\u00e4ytt\u00f6\u00f6n Switch1 ja Vyos1:seen. Kytkimiin saan web interfacen k\u00e4ytt\u00f6\u00f6n komennolla enable web http ja reitittimille komennolla set service https listen-address [IPv4 address on the Router - e.g. loopback] . T\u00e4m\u00e4n j\u00e4lkeen otan n\u00e4ihin palvelimiin yhteyden Lubuntu2:sesta, kirjaudun sis\u00e4\u00e4n ja katson mit\u00e4 l\u00f6yd\u00e4n. T\u00e4ss\u00e4 n\u00e4ytt\u00e4\u00e4 olevan kaikki mit\u00e4 olen itse k\u00e4ytt\u00e4nyt harkoissa ennen, mutta t\u00e4m\u00e4 web interface on hieman hidas joten en tulisi k\u00e4ytt\u00e4m\u00e4\u00e4n tulevaisuudessa. Poikkeuksena on Recent events ja Errors -osio, joka n\u00e4ytt\u00e4\u00e4 hyvin oleelliselta tietoverkkojen hallinnassa. En tied\u00e4 n\u00e4ille vastaavaa CLI komentoa mutta olen varma ett\u00e4 sellainen on olemassa. Toisaalta reitittimien web interface on hieman.... Puutteellinen. Pit\u00e4isk\u00f6 t\u00e4ss\u00e4 tehd\u00e4 oma web interface...","title":"Verkkolaitteiden web interface"},{"location":"E12/#salasanan-nuuskiminen","text":"Huomasin, ett\u00e4 minun wireshark lubuntu oli p\u00e4\u00e4ll\u00e4 edellisest\u00e4 harjoituksesta. P\u00e4\u00e4tin tarkistaa mit\u00e4 l\u00f6ysin sielt\u00e4 ja huomasin, ett\u00e4 minun kytkimen admin tunnus ja salasana oli nuuskittu :fearful: Ehk\u00e4 maailman helpoin tietoverkon pwnaus. Tarvitsee jonkinlaisen salauksen :D","title":"Salasanan nuuskiminen"},{"location":"E13/","text":"Apache palvelin Kuva nykyisest\u00e4 verkosta ja mitk\u00e4 koneet toimivat palvelimina ja asiakkaina: Varmistan, ett\u00e4 Apache palvelin toimii Lubuntu3:sessa k\u00e4ytt\u00e4m\u00e4ll\u00e4 komentoa service apache2 status . N\u00e4ytt\u00e4\u00e4 silt\u00e4, ett\u00e4 palvelin py\u00f6rii ongelmitta. Tarkistan kuitenkin verkkopalvelimen index.html tiedoston wget komennolla ja sy\u00f6tt\u00e4m\u00e4ll\u00e4 sille oman loopback osoitteen. T\u00e4m\u00e4 toimii komennolla: wget http://127.0.0.1/ . more -komennolla n\u00e4en mit\u00e4 kyseisess\u00e4 tiedostossa on. T\u00e4ss\u00e4 tapauksessa se on perus HTML tiedosto. K\u00e4yn vilkaisemassa milt\u00e4 kyseinen index.html n\u00e4ytt\u00e4\u00e4 minun asiakas koneelta kun k\u00e4yt\u00e4n verkkoselainta: Ei paha, mutta haluan omat verkkosivut t\u00e4lle palvelimelle. Verkkopalvelimen konfigurointi Muokkaan palvelimen index.html -tiedostoa k\u00e4ytt\u00e4m\u00e4ll\u00e4 nanoa. Komennolla sudo nano /var/www/html/index.html ja lis\u00e4\u00e4n sinne muutaman asian. T\u00e4m\u00e4n j\u00e4lkeen tallennan tiedoston. Kun uusi index.html on tehty, vierailen asiakas koneelta uuden HTTP -palvelimen etusivua: Erinomaista! HTTP palvelin n\u00e4ytt\u00e4\u00e4 toimivan ongelmitta. HTTP:n wiresharkkailu Lis\u00e4\u00e4n wireshark lubuntun asiakaskoneen verkkoon jolla nuuskin palvelimen ja asiakkaan v\u00e4list\u00e4 kommunikointia. T\u00e4m\u00e4n j\u00e4lkeen pyyd\u00e4n palvelimelta index.html tiedoston uudestaan ja katson mit\u00e4 n\u00e4en. N\u00e4en, ett\u00e4 ensin palvelin ja asiakas muodostavat yhteyden TCP k\u00e4ttelyll\u00e4 jonka j\u00e4lkeen asiakas pyyt\u00e4\u00e4 HTTP protokollalla palvelimen index.html tiedostoa. Tarkastelemalla pakettia n\u00e4en, ett\u00e4 paketissa sis\u00e4ltyy asiakkaan eri tietoja. Esimerkiksi User-agent kertoo asiakkaan verkkoselaimen, sen version ja k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4n. T\u00e4ss\u00e4 tapauksessa se on mozilla verkkoselain. K\u00e4ytt\u00f6j\u00e4rjestelm\u00e4 on hieman v\u00e4\u00e4rin, sill\u00e4 minulla on k\u00e4yt\u00f6ss\u00e4 Lubuntu. T\u00e4m\u00e4 on ymm\u00e4rrett\u00e4v\u00e4\u00e4, sill\u00e4 Lubuntu on Ubuntun johdannainen k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4.","title":"Apache palvelin"},{"location":"E13/#apache-palvelin","text":"Kuva nykyisest\u00e4 verkosta ja mitk\u00e4 koneet toimivat palvelimina ja asiakkaina: Varmistan, ett\u00e4 Apache palvelin toimii Lubuntu3:sessa k\u00e4ytt\u00e4m\u00e4ll\u00e4 komentoa service apache2 status . N\u00e4ytt\u00e4\u00e4 silt\u00e4, ett\u00e4 palvelin py\u00f6rii ongelmitta. Tarkistan kuitenkin verkkopalvelimen index.html tiedoston wget komennolla ja sy\u00f6tt\u00e4m\u00e4ll\u00e4 sille oman loopback osoitteen. T\u00e4m\u00e4 toimii komennolla: wget http://127.0.0.1/ . more -komennolla n\u00e4en mit\u00e4 kyseisess\u00e4 tiedostossa on. T\u00e4ss\u00e4 tapauksessa se on perus HTML tiedosto. K\u00e4yn vilkaisemassa milt\u00e4 kyseinen index.html n\u00e4ytt\u00e4\u00e4 minun asiakas koneelta kun k\u00e4yt\u00e4n verkkoselainta: Ei paha, mutta haluan omat verkkosivut t\u00e4lle palvelimelle.","title":"Apache palvelin"},{"location":"E13/#verkkopalvelimen-konfigurointi","text":"Muokkaan palvelimen index.html -tiedostoa k\u00e4ytt\u00e4m\u00e4ll\u00e4 nanoa. Komennolla sudo nano /var/www/html/index.html ja lis\u00e4\u00e4n sinne muutaman asian. T\u00e4m\u00e4n j\u00e4lkeen tallennan tiedoston. Kun uusi index.html on tehty, vierailen asiakas koneelta uuden HTTP -palvelimen etusivua: Erinomaista! HTTP palvelin n\u00e4ytt\u00e4\u00e4 toimivan ongelmitta.","title":"Verkkopalvelimen konfigurointi"},{"location":"E13/#httpn-wiresharkkailu","text":"Lis\u00e4\u00e4n wireshark lubuntun asiakaskoneen verkkoon jolla nuuskin palvelimen ja asiakkaan v\u00e4list\u00e4 kommunikointia. T\u00e4m\u00e4n j\u00e4lkeen pyyd\u00e4n palvelimelta index.html tiedoston uudestaan ja katson mit\u00e4 n\u00e4en. N\u00e4en, ett\u00e4 ensin palvelin ja asiakas muodostavat yhteyden TCP k\u00e4ttelyll\u00e4 jonka j\u00e4lkeen asiakas pyyt\u00e4\u00e4 HTTP protokollalla palvelimen index.html tiedostoa. Tarkastelemalla pakettia n\u00e4en, ett\u00e4 paketissa sis\u00e4ltyy asiakkaan eri tietoja. Esimerkiksi User-agent kertoo asiakkaan verkkoselaimen, sen version ja k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4n. T\u00e4ss\u00e4 tapauksessa se on mozilla verkkoselain. K\u00e4ytt\u00f6j\u00e4rjestelm\u00e4 on hieman v\u00e4\u00e4rin, sill\u00e4 minulla on k\u00e4yt\u00f6ss\u00e4 Lubuntu. T\u00e4m\u00e4 on ymm\u00e4rrett\u00e4v\u00e4\u00e4, sill\u00e4 Lubuntu on Ubuntun johdannainen k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4.","title":"HTTP:n wiresharkkailu"},{"location":"E14/","text":"WLAN Tarkastan 'Wifi Analyzer' -ohjelmalla, miten l\u00e4hialueen wifi kanavataajuuksia k\u00e4ytet\u00e4\u00e4n: N\u00e4en, ett\u00e4 alueella ei ole t\u00e4ysin vapaita Wifi 2.4GHz kanavia. Paljon p\u00e4\u00e4llekk\u00e4isyyksi\u00e4 l\u00f6ytyy varsinkin kanavalla 5 ja 10. Alueen Wifi 'saastutus' on ymm\u00e4rrett\u00e4v\u00e4\u00e4, sill\u00e4 t\u00e4m\u00e4 on mitattu opiskelija asunnosta. T\u00e4m\u00e4n lis\u00e4ksi t\u00e4ll\u00e4 voin arvioida kuinka kaukana kuvassa olevat Wifi tukiasemat ovat niiden signaalien voimakkuuksien perustein. Luonnollisesti minun tukiasema HirviporukanYT_Neuvottelut on voimakkain koska se on parin metrin p\u00e4\u00e4ss\u00e4. IP osoitteiden tutkimista Minun pit\u00e4\u00e4 tiet\u00e4\u00e4 minun kotiverkon aliverkoitus ja oletusyhdysk\u00e4yt\u00e4v\u00e4. Voin l\u00f6yt\u00e4\u00e4 t\u00e4m\u00e4n helposti Windowsin komentorivilt\u00e4 komennolla ipconfig : N\u00e4en, ett\u00e4 tietokoneeni Wifi adapterin lokaali IP-osoite on 192.168.1.235 ja aliverkon maski on 255.255.255.0 joka on aika tyypillinen kotiverkoissa. N\u00e4en my\u00f6s, ett\u00e4 oletusyhdysk\u00e4yt\u00e4v\u00e4 on osoitteessa 192.168.1.1 . Selvit\u00e4n, jos l\u00f6yd\u00e4n verkkopalvelimen t\u00e4st\u00e4 osoitteesta. WLAN tukiaseman tutkiminen Sy\u00f6t\u00e4n osoitteen 192.168.1.1 minun verkkoselaimeen ja katson jos n\u00e4en mit\u00e4\u00e4n: P\u00e4\u00e4sen tukiaseman kirjautumissivulle! Kirjaudun sis\u00e4\u00e4n ja tarkistan mit\u00e4 n\u00e4en. Kirjautumisen j\u00e4lkeen n\u00e4en Wifi tukiaseman yleiskatsauksen joka n\u00e4ytt\u00e4\u00e4 paljon eri tietoja ja elementtej\u00e4. Aloitan Wifi asetuksista ja katson, jos voin vaihtaa Wifi kanavaa. Kuvasta n\u00e4en, ett\u00e4 voin vaihtaa Wifi tukiaseman taajuuden joko 2.4GHz, 5.0GHz tai laittamaan kummankin p\u00e4\u00e4lle yht\u00e4aikaa. T\u00e4m\u00e4n lis\u00e4ksi voin manuaalisesti vaihtaa Wifi kanavaa halutessani, mutta tukiasemani n\u00e4ytt\u00e4\u00e4 asettavan t\u00e4m\u00e4n automaattisesti. Toiselta v\u00e4lilehdelt\u00e4 voin skannata Wifi kanavien ruuhkan kuten 'Wifi Analyzer' -ohjelmalla. T\u00e4lt\u00e4 sivulta voin muutta muitakin Wifiin liittyvi\u00e4 asetuksia kuten asiakkaiden maksimim\u00e4\u00e4r\u00e4n. T\u00e4m\u00e4n j\u00e4lkeen menen 'Home Networking' -v\u00e4lilehteen josta toivon l\u00f6yt\u00e4v\u00e4ni aliverkotus- ja DHCP asetukset. T\u00e4\u00e4lt\u00e4 n\u00e4en nykyisen aliverkon, tukiaseman IP-osoitteen ja DHCP palvelimen asetukset. Voin halutessaan muokata n\u00e4it\u00e4 asetuksia miten haluan. Erinomaista! N\u00e4iden lis\u00e4ksi voin muokata ja tarkistella paljon muitakin elementtej\u00e4: 'Network settings' -osiosta voin muutta esimerkiksi Wifi, LAN, VLAN ja DNS asetuksia. 'Security settings' -osiosta voin tarkastella ja muuttaa esimerkiksi palomuurin tilaa ja s\u00e4\u00e4nt\u00f6j\u00e4. Mielenkiintoista... 'System monitor' -osiosta n\u00e4en monenlaisia loki tiedostoja, mutta my\u00f6s ARP- ja reititys taulut. N\u00e4m\u00e4 taulut ovat mielest\u00e4ni mielenkiintoisemmat sill\u00e4 n\u00e4ist\u00e4 n\u00e4en minun l\u00e4heisimm\u00e4t reitittimet.","title":"WLAN"},{"location":"E14/#wlan","text":"Tarkastan 'Wifi Analyzer' -ohjelmalla, miten l\u00e4hialueen wifi kanavataajuuksia k\u00e4ytet\u00e4\u00e4n: N\u00e4en, ett\u00e4 alueella ei ole t\u00e4ysin vapaita Wifi 2.4GHz kanavia. Paljon p\u00e4\u00e4llekk\u00e4isyyksi\u00e4 l\u00f6ytyy varsinkin kanavalla 5 ja 10. Alueen Wifi 'saastutus' on ymm\u00e4rrett\u00e4v\u00e4\u00e4, sill\u00e4 t\u00e4m\u00e4 on mitattu opiskelija asunnosta. T\u00e4m\u00e4n lis\u00e4ksi t\u00e4ll\u00e4 voin arvioida kuinka kaukana kuvassa olevat Wifi tukiasemat ovat niiden signaalien voimakkuuksien perustein. Luonnollisesti minun tukiasema HirviporukanYT_Neuvottelut on voimakkain koska se on parin metrin p\u00e4\u00e4ss\u00e4.","title":"WLAN"},{"location":"E14/#ip-osoitteiden-tutkimista","text":"Minun pit\u00e4\u00e4 tiet\u00e4\u00e4 minun kotiverkon aliverkoitus ja oletusyhdysk\u00e4yt\u00e4v\u00e4. Voin l\u00f6yt\u00e4\u00e4 t\u00e4m\u00e4n helposti Windowsin komentorivilt\u00e4 komennolla ipconfig : N\u00e4en, ett\u00e4 tietokoneeni Wifi adapterin lokaali IP-osoite on 192.168.1.235 ja aliverkon maski on 255.255.255.0 joka on aika tyypillinen kotiverkoissa. N\u00e4en my\u00f6s, ett\u00e4 oletusyhdysk\u00e4yt\u00e4v\u00e4 on osoitteessa 192.168.1.1 . Selvit\u00e4n, jos l\u00f6yd\u00e4n verkkopalvelimen t\u00e4st\u00e4 osoitteesta.","title":"IP osoitteiden tutkimista"},{"location":"E14/#wlan-tukiaseman-tutkiminen","text":"Sy\u00f6t\u00e4n osoitteen 192.168.1.1 minun verkkoselaimeen ja katson jos n\u00e4en mit\u00e4\u00e4n: P\u00e4\u00e4sen tukiaseman kirjautumissivulle! Kirjaudun sis\u00e4\u00e4n ja tarkistan mit\u00e4 n\u00e4en. Kirjautumisen j\u00e4lkeen n\u00e4en Wifi tukiaseman yleiskatsauksen joka n\u00e4ytt\u00e4\u00e4 paljon eri tietoja ja elementtej\u00e4. Aloitan Wifi asetuksista ja katson, jos voin vaihtaa Wifi kanavaa. Kuvasta n\u00e4en, ett\u00e4 voin vaihtaa Wifi tukiaseman taajuuden joko 2.4GHz, 5.0GHz tai laittamaan kummankin p\u00e4\u00e4lle yht\u00e4aikaa. T\u00e4m\u00e4n lis\u00e4ksi voin manuaalisesti vaihtaa Wifi kanavaa halutessani, mutta tukiasemani n\u00e4ytt\u00e4\u00e4 asettavan t\u00e4m\u00e4n automaattisesti. Toiselta v\u00e4lilehdelt\u00e4 voin skannata Wifi kanavien ruuhkan kuten 'Wifi Analyzer' -ohjelmalla. T\u00e4lt\u00e4 sivulta voin muutta muitakin Wifiin liittyvi\u00e4 asetuksia kuten asiakkaiden maksimim\u00e4\u00e4r\u00e4n. T\u00e4m\u00e4n j\u00e4lkeen menen 'Home Networking' -v\u00e4lilehteen josta toivon l\u00f6yt\u00e4v\u00e4ni aliverkotus- ja DHCP asetukset. T\u00e4\u00e4lt\u00e4 n\u00e4en nykyisen aliverkon, tukiaseman IP-osoitteen ja DHCP palvelimen asetukset. Voin halutessaan muokata n\u00e4it\u00e4 asetuksia miten haluan. Erinomaista! N\u00e4iden lis\u00e4ksi voin muokata ja tarkistella paljon muitakin elementtej\u00e4: 'Network settings' -osiosta voin muutta esimerkiksi Wifi, LAN, VLAN ja DNS asetuksia. 'Security settings' -osiosta voin tarkastella ja muuttaa esimerkiksi palomuurin tilaa ja s\u00e4\u00e4nt\u00f6j\u00e4. Mielenkiintoista... 'System monitor' -osiosta n\u00e4en monenlaisia loki tiedostoja, mutta my\u00f6s ARP- ja reititys taulut. N\u00e4m\u00e4 taulut ovat mielest\u00e4ni mielenkiintoisemmat sill\u00e4 n\u00e4ist\u00e4 n\u00e4en minun l\u00e4heisimm\u00e4t reitittimet.","title":"WLAN tukiaseman tutkiminen"},{"location":"E15/","text":"DNS DNS in topology Paikallisen DNS tiedoston luominen onnistuu etc/hosts -tiedostossa. Muokkaan sit\u00e4 komennolla sudo nano etc/hosts Annan kaikille kytkimille, lubuntuille ja router loopback osotteille oman nimen. T\u00e4m\u00e4n j\u00e4lkeen testailen eri komentoja ja protokolleja ja katson, mit\u00e4 tapahtuu. Traceroute: HTTP: Ping: N\u00e4ytt\u00e4\u00e4 silt\u00e4, ett\u00e4 paikallisen DNS tiedoston luominen onnistui!","title":"DNS"},{"location":"E15/#dns","text":"","title":"DNS"},{"location":"E15/#dns-in-topology","text":"Paikallisen DNS tiedoston luominen onnistuu etc/hosts -tiedostossa. Muokkaan sit\u00e4 komennolla sudo nano etc/hosts Annan kaikille kytkimille, lubuntuille ja router loopback osotteille oman nimen. T\u00e4m\u00e4n j\u00e4lkeen testailen eri komentoja ja protokolleja ja katson, mit\u00e4 tapahtuu. Traceroute: HTTP: Ping: N\u00e4ytt\u00e4\u00e4 silt\u00e4, ett\u00e4 paikallisen DNS tiedoston luominen onnistui!","title":"DNS in topology"}]}